---
phase: 01.2-skill-tests
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - tests/skills/kata-managing-project-roadmap.test.js
  - tests/skills/kata-planning-phases.test.js
  - tests/skills/kata-providing-progress-and-status-updates.test.js
autonomous: true

must_haves:
  truths:
    - "kata-managing-project-roadmap triggers on 'add phase' prompt"
    - "kata-planning-phases triggers on 'plan phase' prompt"
    - "kata-providing-progress-and-status-updates triggers on 'what's the status' prompt"
  artifacts:
    - path: "tests/skills/kata-managing-project-roadmap.test.js"
      provides: "Trigger tests for roadmap skill"
      min_lines: 30
    - path: "tests/skills/kata-planning-phases.test.js"
      provides: "Trigger tests for planning skill"
      min_lines: 30
    - path: "tests/skills/kata-providing-progress-and-status-updates.test.js"
      provides: "Trigger tests for progress skill"
      min_lines: 30
  key_links:
    - from: "tests/skills/*.test.js"
      to: "tests/harness/claude-cli.js"
      via: "import invokeClaude"
      pattern: "import.*invokeClaude.*from.*harness/claude-cli"
---

<objective>
Create test files for the second batch of 3 skills: kata-managing-project-roadmap, kata-planning-phases, and kata-providing-progress-and-status-updates.

Purpose: Verify these skills trigger correctly on natural language prompts.
Output: Three test files following the established pattern from kata-managing-todos.test.js.
</objective>

<execution_context>
@./.claude/kata/workflows/execute-plan.md
@./.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@tests/skills/kata-managing-todos.test.js
@tests/harness/claude-cli.js
@tests/harness/assertions.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-managing-project-roadmap.test.js</name>
  <files>tests/skills/kata-managing-project-roadmap.test.js</files>
  <action>
Create test file following the exact pattern from kata-managing-todos.test.js:
- Import node:test, fs functions, path functions, harness modules
- Set up FIXTURES_DIR and KATA_ROOT paths
- Create describe block for 'kata-managing-project-roadmap skill'
- beforeEach: create temp dir, copy fixtures, install skill from skills/kata-managing-project-roadmap
- afterEach: cleanup temp dir

Add trigger tests using phrases from the skill's description:
- "add a phase to the roadmap" - should trigger ADD operation
- "insert urgent phase" - should trigger INSERT operation
- "I need a new phase for testing" - should trigger ADD operation

Each test: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-managing-project-roadmap.test.js</verify>
  <done>Test file exists at tests/skills/kata-managing-project-roadmap.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 2: Create kata-planning-phases.test.js</name>
  <files>tests/skills/kata-planning-phases.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup
- Install skill from skills/kata-planning-phases

Add trigger tests using phrases from the skill's description:
- "plan phase 1" - should trigger planning workflow
- "create plan for phase 1" - should trigger planning workflow
- "task breakdown for phase 1" - should trigger planning workflow

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-planning-phases.test.js</verify>
  <done>Test file exists at tests/skills/kata-planning-phases.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 3: Create kata-providing-progress-and-status-updates.test.js</name>
  <files>tests/skills/kata-providing-progress-and-status-updates.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup
- Install skill from skills/kata-providing-progress-and-status-updates

Add trigger tests using phrases from the skill's description:
- "what's the status" - should trigger PROGRESS operation
- "check status" - should trigger PROGRESS operation
- "how are we doing" - should trigger PROGRESS operation
- "where am I" - should trigger PROGRESS operation

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-providing-progress-and-status-updates.test.js</verify>
  <done>Test file exists at tests/skills/kata-providing-progress-and-status-updates.test.js with at least 2 trigger tests</done>
</task>

</tasks>

<verification>
```bash
# Verify all three test files exist
ls -la tests/skills/kata-managing-project-roadmap.test.js
ls -la tests/skills/kata-planning-phases.test.js
ls -la tests/skills/kata-providing-progress-and-status-updates.test.js

# Verify syntax (dry run)
node --check tests/skills/kata-managing-project-roadmap.test.js
node --check tests/skills/kata-planning-phases.test.js
node --check tests/skills/kata-providing-progress-and-status-updates.test.js
```
</verification>

<success_criteria>
- [ ] kata-managing-project-roadmap.test.js exists with 2+ trigger tests
- [ ] kata-planning-phases.test.js exists with 2+ trigger tests
- [ ] kata-providing-progress-and-status-updates.test.js exists with 2+ trigger tests
- [ ] All three files pass syntax check (node --check)
- [ ] Tests follow established pattern from kata-managing-todos.test.js
</success_criteria>

<output>
After completion, create `.planning/phases/01.2-skill-tests/01.2-02-SUMMARY.md`
</output>
