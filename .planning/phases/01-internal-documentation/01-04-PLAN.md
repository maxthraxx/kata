---
phase: 01-internal-documentation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: [.docs/diagrams/FLOWS.md, .docs/glossary/GLOSSARY.md]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Diagrams are readable on dark background themes"
    - "Diagrams have sufficient contrast for all text and elements"
  artifacts:
    - path: ".docs/diagrams/FLOWS.md"
      provides: "Dark theme styled Mermaid diagrams (6)"
      contains: "%%{init: {'theme'"
    - path: ".docs/glossary/GLOSSARY.md"
      provides: "Dark theme styled Mermaid diagram (1)"
      contains: "%%{init: {'theme'"
  key_links:
    - from: "Mermaid diagram blocks"
      to: "Dark theme directive"
      via: "%%{init: ...} comment"
      pattern: "%%\\{init:.*theme.*dark"
---

<objective>
Add dark theme styling to all 7 Mermaid diagrams across FLOWS.md and GLOSSARY.md to ensure readability on dark backgrounds.

**Purpose:** Address UAT Issue #2 — all Mermaid diagrams need dark theme styling for better contrast on dark background themes.

**Output:** All 7 diagrams styled for dark theme compatibility.
</objective>

<execution_context>
<!-- Executor agent has built-in instructions for plan execution and summary creation -->
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-internal-documentation/01-UAT.md
@.docs/diagrams/FLOWS.md
@.docs/glossary/GLOSSARY.md
</context>

<tasks>

<task type="auto">
  <name>Add dark theme directive to FLOWS.md diagrams</name>
  <files>.docs/diagrams/FLOWS.md</files>
  <action>
Add dark theme initialization to all 6 Mermaid diagrams in FLOWS.md.

For each diagram block, add this directive as the FIRST line inside the mermaid fence:

```
%%{init: {'theme': 'dark'}}%%
```

The pattern for each diagram should be:

````
```mermaid
%%{init: {'theme': 'dark'}}%%
flowchart TD
  ...diagram content...
```
````

Apply to:
- Section 1: High-Level Orchestration
- Section 2: Project Lifecycle
- Section 3: Planning Flow
- Section 4: Execution Flow
- Section 5: Verification Flow
- Section 6: PR Workflow

DO NOT change diagram content, only add the theme directive.
  </action>
  <verify>Open .docs/diagrams/FLOWS.md and check that all 6 diagram blocks start with `%%{init: {'theme': 'dark'}}%%`</verify>
  <done>All 6 diagrams in FLOWS.md have dark theme directive as first line</done>
</task>

<task type="auto">
  <name>Add dark theme directive to GLOSSARY.md diagram</name>
  <files>.docs/glossary/GLOSSARY.md</files>
  <action>
Add dark theme initialization to the Relationship Diagram in GLOSSARY.md (around line 22).

Add this directive as the FIRST line inside the mermaid fence:

```
%%{init: {'theme': 'dark'}}%%
```

The diagram should become:

````
```mermaid
%%{init: {'theme': 'dark'}}%%
flowchart TB
  ...diagram content...
```
````

DO NOT change diagram content, only add the theme directive.
  </action>
  <verify>Open .docs/glossary/GLOSSARY.md and check that the Relationship Diagram starts with `%%{init: {'theme': 'dark'}}%%`</verify>
  <done>Relationship Diagram in GLOSSARY.md has dark theme directive as first line</done>
</task>

<task type="auto">
  <name>Verify dark theme rendering</name>
  <files>.docs/diagrams/FLOWS.md, .docs/glossary/GLOSSARY.md</files>
  <action>
Test diagram rendering with dark theme:

1. Use Mermaid Live Editor (https://mermaid.live) with dark mode enabled
2. Copy/paste one diagram from FLOWS.md and one from GLOSSARY.md
3. Verify text is readable, nodes have sufficient contrast
4. If contrast issues remain, add explicit color overrides:

```
%%{init: {'theme': 'dark', 'themeVariables': { 'primaryColor': '#1e293b', 'primaryTextColor': '#f1f5f9', 'primaryBorderColor': '#475569', 'lineColor': '#64748b', 'secondaryColor': '#0f172a', 'tertiaryColor': '#334155'}}}%%
```

Only add color overrides if default dark theme has insufficient contrast.
  </action>
  <verify>Visual check in Mermaid Live Editor shows readable diagrams with good contrast on dark background</verify>
  <done>All 7 diagrams render clearly on dark backgrounds with sufficient contrast</done>
</task>

</tasks>

<verification>
1. Count diagram blocks in both files — should be 7 total (6 in FLOWS.md, 1 in GLOSSARY.md)
2. Check each diagram starts with `%%{init: {'theme': 'dark'}}%%`
3. Verify Mermaid syntax remains valid
4. Test rendering in dark mode (GitHub dark theme or Mermaid Live Editor)
</verification>

<success_criteria>
- [ ] All 6 diagrams in FLOWS.md have dark theme directive
- [ ] 1 diagram in GLOSSARY.md has dark theme directive
- [ ] Total: 7 diagrams styled for dark theme
- [ ] Diagrams render correctly with good contrast
- [ ] Mermaid syntax valid (no broken diagrams)
</success_criteria>

<output>
After completion, create `.planning/phases/01-internal-documentation/01-04-SUMMARY.md`
</output>
