---
phase: 00-develop-robust-testing-suite
plan: 02
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - tests/skills/tracking-progress.test.js
  - tests/skills/providing-help.test.js
  - tests/skills/showing-whats-new.test.js
  - tests/skills/listing-phase-assumptions.test.js
autonomous: true

must_haves:
  truths:
    - "tracking-progress skill can be invoked and returns project status"
    - "providing-help skill responds with available commands"
    - "showing-whats-new skill displays version information"
    - "listing-phase-assumptions skill lists assumptions for a phase"
  artifacts:
    - path: "tests/skills/tracking-progress.test.js"
      provides: "Test for kata-tracking-progress skill"
      min_lines: 30
    - path: "tests/skills/providing-help.test.js"
      provides: "Test for kata-providing-help skill"
      min_lines: 30
    - path: "tests/skills/showing-whats-new.test.js"
      provides: "Test for kata-showing-whats-new skill"
      min_lines: 30
    - path: "tests/skills/listing-phase-assumptions.test.js"
      provides: "Test for kata-listing-phase-assumptions skill"
      min_lines: 30
  key_links:
    - from: "tests/skills/*.test.js"
      to: "tests/harness/claude-cli.js"
      via: "import invokeClaude"
      pattern: "import.*invokeClaude"
---

<objective>
Create skill tests for read-only status/info skills (Wave 1 of skill testing).

Purpose: Start with simpler skills that primarily read state and display information. These are lower-cost tests that establish the pattern for more complex skill tests.

Output: 4 skill test files covering status and information display skills.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/00-develop-robust-testing-suite/00-CONTEXT.md
@.planning/phases/00-develop-robust-testing-suite/00-RESEARCH.md

Test harness:
@tests/harness/claude-cli.js
@tests/harness/assertions.js
@tests/README.md

Skills to test:
@skills/kata-tracking-progress/SKILL.md
@skills/kata-providing-help/SKILL.md
@skills/kata-showing-whats-new/SKILL.md
@skills/kata-listing-phase-assumptions/SKILL.md

Test fixture:
@tests/fixtures/kata-project/.planning/STATE.md
@tests/fixtures/kata-project/.planning/ROADMAP.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create tests/skills directory and tracking-progress.test.js</name>
  <files>tests/skills/tracking-progress.test.js</files>
  <action>
Create `tests/skills/` directory if not exists.

Create `tests/skills/tracking-progress.test.js` following the pattern from tests/README.md:

1. Import test utilities from node:test and node:fs
2. Import invokeClaude, assertNoError, assertSkillInvoked, assertResultContains from harness
3. Setup beforeEach to:
   - Create temp directory with mkdtempSync
   - Copy fixtures/kata-project to temp
   - Copy skills/kata-tracking-progress to temp/.claude/skills/
4. Setup afterEach to clean up temp directory
5. Test cases:
   - "responds to 'what's the status' prompt" - invoke with natural language, assert skill invoked and no error
   - "shows project state information" - assert result contains "Milestone" or "Phase" (from STATE.md)

Use config.budgets.quick ($0.50) and config.timeouts.quick (60s) for these simple tests.
  </action>
  <verify>
```bash
node --test tests/skills/tracking-progress.test.js
```
Tests should pass (requires ANTHROPIC_API_KEY).
  </verify>
  <done>tracking-progress.test.js exists with tests for natural language invocation and state display</done>
</task>

<task type="auto">
  <name>Task 2: Create providing-help.test.js and showing-whats-new.test.js</name>
  <files>tests/skills/providing-help.test.js, tests/skills/showing-whats-new.test.js</files>
  <action>
Create `tests/skills/providing-help.test.js`:
1. Same setup/teardown pattern as tracking-progress.test.js
2. Install kata-providing-help skill in beforeEach
3. Test cases:
   - "responds to 'help' prompt" - assert skill invoked
   - "lists available commands" - assert result contains "kata" (references to kata commands/skills)

Create `tests/skills/showing-whats-new.test.js`:
1. Same setup/teardown pattern
2. Install kata-showing-whats-new skill in beforeEach
3. Test cases:
   - "responds to 'what's new' prompt" - assert skill invoked
   - "shows version information" - assert result contains "version" or version number pattern

Both use config.budgets.quick and config.timeouts.quick.
  </action>
  <verify>
```bash
node --test tests/skills/providing-help.test.js tests/skills/showing-whats-new.test.js
```
  </verify>
  <done>providing-help.test.js and showing-whats-new.test.js exist with basic invocation tests</done>
</task>

<task type="auto">
  <name>Task 3: Create listing-phase-assumptions.test.js</name>
  <files>tests/skills/listing-phase-assumptions.test.js</files>
  <action>
Create `tests/skills/listing-phase-assumptions.test.js`:

1. Same setup/teardown pattern
2. Install kata-listing-phase-assumptions skill in beforeEach
3. This skill needs a phase to list assumptions for, so:
   - Create a minimal phase structure in temp/.planning/phases/01-test-phase/
   - Add 01-CONTEXT.md with some assumptions content
4. Test cases:
   - "responds to 'list assumptions for phase 1' prompt" - assert skill invoked
   - "displays phase context information" - assert result contains content from CONTEXT.md or reasonable response about no assumptions

Use config.budgets.standard ($2.00) since this skill may need more context processing.
  </action>
  <verify>
```bash
node --test tests/skills/listing-phase-assumptions.test.js
```
  </verify>
  <done>listing-phase-assumptions.test.js exists with test for phase assumption listing</done>
</task>

</tasks>

<verification>
```bash
# Run all Wave 1 skill tests
node --test tests/skills/tracking-progress.test.js tests/skills/providing-help.test.js tests/skills/showing-whats-new.test.js tests/skills/listing-phase-assumptions.test.js
```
All tests pass (requires ANTHROPIC_API_KEY environment variable).
</verification>

<success_criteria>
- tests/skills/ directory created
- 4 test files created for status/info skills
- Each test file follows established pattern (setup, teardown, assertions)
- Tests invoke Claude and verify skill was triggered
- Tests use appropriate budget/timeout tiers
</success_criteria>

<output>
After completion, create `.planning/phases/00-develop-robust-testing-suite/00-02-SUMMARY.md`
</output>
