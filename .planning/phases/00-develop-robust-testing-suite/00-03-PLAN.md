---
phase: 00-develop-robust-testing-suite
plan: 03
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - tests/skills/adding-todos.test.js
  - tests/skills/checking-todos.test.js
  - tests/skills/pausing-work.test.js
  - tests/skills/resuming-work.test.js
  - tests/skills/configuring-settings.test.js
  - tests/skills/setting-profiles.test.js
autonomous: true

must_haves:
  truths:
    - "adding-todos skill creates todo files in .planning/todos/"
    - "checking-todos skill reads and displays pending todos"
    - "pausing-work skill creates pause state"
    - "resuming-work skill reads pause state"
    - "configuring-settings skill modifies config.json"
    - "setting-profiles skill sets execution profile"
  artifacts:
    - path: "tests/skills/adding-todos.test.js"
      provides: "Test for kata-adding-todos skill"
      min_lines: 40
    - path: "tests/skills/checking-todos.test.js"
      provides: "Test for kata-checking-todos skill"
      min_lines: 30
    - path: "tests/skills/pausing-work.test.js"
      provides: "Test for kata-pausing-work skill"
      min_lines: 30
    - path: "tests/skills/resuming-work.test.js"
      provides: "Test for kata-resuming-work skill"
      min_lines: 30
    - path: "tests/skills/configuring-settings.test.js"
      provides: "Test for kata-configuring-settings skill"
      min_lines: 30
    - path: "tests/skills/setting-profiles.test.js"
      provides: "Test for kata-setting-profiles skill"
      min_lines: 30
  key_links:
    - from: "tests/skills/adding-todos.test.js"
      to: ".planning/todos/"
      via: "assertArtifactExists"
      pattern: "assertArtifactExists.*todos"
---

<objective>
Create skill tests for project management skills (Wave 2 of skill testing).

Purpose: Test skills that modify planning files like todos, config, and work state. These verify Kata's core project management capabilities work correctly.

Output: 6 skill test files covering todo management, work state, and configuration skills.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/00-develop-robust-testing-suite/00-CONTEXT.md
@.planning/phases/00-develop-robust-testing-suite/00-RESEARCH.md

Test harness:
@tests/harness/claude-cli.js
@tests/harness/assertions.js

Skills to test:
@skills/kata-adding-todos/SKILL.md
@skills/kata-checking-todos/SKILL.md
@skills/kata-pausing-work/SKILL.md
@skills/kata-resuming-work/SKILL.md
@skills/kata-configuring-settings/SKILL.md
@skills/kata-setting-profiles/SKILL.md

Test fixture:
@tests/fixtures/kata-project/.planning/STATE.md
@tests/fixtures/kata-project/.planning/todos/pending/.gitkeep
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create adding-todos.test.js and checking-todos.test.js</name>
  <files>tests/skills/adding-todos.test.js, tests/skills/checking-todos.test.js</files>
  <action>
Create `tests/skills/adding-todos.test.js`:
1. Standard setup/teardown pattern
2. Install kata-adding-todos skill
3. Test cases:
   - "creates todo file on 'add a todo for fixing the login bug'" - invoke, assert no error, assert skill invoked
   - "todo file created in pending directory" - use assertArtifactExists or assertFileMatchesPattern to verify .planning/todos/pending/ has a new .md file

Create `tests/skills/checking-todos.test.js`:
1. Standard setup/teardown pattern
2. Install kata-checking-todos skill
3. In beforeEach, create a sample todo file in .planning/todos/pending/ for the test
4. Test cases:
   - "responds to 'check my todos' prompt" - assert skill invoked
   - "lists existing todos" - assert result contains content from the sample todo or "todo" mention

Use config.budgets.standard ($2.00) for these.
  </action>
  <verify>
```bash
node --test tests/skills/adding-todos.test.js tests/skills/checking-todos.test.js
```
  </verify>
  <done>adding-todos.test.js verifies todo creation, checking-todos.test.js verifies todo display</done>
</task>

<task type="auto">
  <name>Task 2: Create pausing-work.test.js and resuming-work.test.js</name>
  <files>tests/skills/pausing-work.test.js, tests/skills/resuming-work.test.js</files>
  <action>
Create `tests/skills/pausing-work.test.js`:
1. Standard setup/teardown pattern
2. Install kata-pausing-work skill
3. Test cases:
   - "responds to 'pause work' prompt" - assert skill invoked
   - "updates session state" - assert STATE.md is modified or pause indicator exists

Create `tests/skills/resuming-work.test.js`:
1. Standard setup/teardown pattern
2. Install kata-resuming-work skill
3. In beforeEach, create a pause state (modify STATE.md to indicate paused session)
4. Test cases:
   - "responds to 'resume work' prompt" - assert skill invoked
   - "reads previous session context" - assert result references session or continuity

Use config.budgets.standard ($2.00).
  </action>
  <verify>
```bash
node --test tests/skills/pausing-work.test.js tests/skills/resuming-work.test.js
```
  </verify>
  <done>pausing-work.test.js and resuming-work.test.js verify work state management</done>
</task>

<task type="auto">
  <name>Task 3: Create configuring-settings.test.js and setting-profiles.test.js</name>
  <files>tests/skills/configuring-settings.test.js, tests/skills/setting-profiles.test.js</files>
  <action>
Create `tests/skills/configuring-settings.test.js`:
1. Standard setup/teardown pattern
2. Install kata-configuring-settings skill
3. Test cases:
   - "responds to 'configure settings' prompt" - assert skill invoked
   - "can modify config.json" - if skill creates/modifies .planning/config.json, verify with assertArtifactExists

Create `tests/skills/setting-profiles.test.js`:
1. Standard setup/teardown pattern
2. Install kata-setting-profiles skill
3. Test cases:
   - "responds to 'set profile to quick' prompt" - assert skill invoked
   - "profile affects execution" - assert result mentions profile or quick/standard/comprehensive

Use config.budgets.quick ($0.50) - these are simpler configuration skills.
  </action>
  <verify>
```bash
node --test tests/skills/configuring-settings.test.js tests/skills/setting-profiles.test.js
```
  </verify>
  <done>configuring-settings.test.js and setting-profiles.test.js verify configuration management</done>
</task>

</tasks>

<verification>
```bash
# Run all Wave 2 project management skill tests
node --test tests/skills/adding-todos.test.js tests/skills/checking-todos.test.js tests/skills/pausing-work.test.js tests/skills/resuming-work.test.js tests/skills/configuring-settings.test.js tests/skills/setting-profiles.test.js
```
All tests pass (requires ANTHROPIC_API_KEY).
</verification>

<success_criteria>
- 6 test files created for project management skills
- adding-todos verifies file creation in todos directory
- checking-todos verifies todo display
- pausing/resuming tests verify work state persistence
- config tests verify settings modification
- All follow established test patterns
</success_criteria>

<output>
After completion, create `.planning/phases/00-develop-robust-testing-suite/00-03-SUMMARY.md`
</output>
