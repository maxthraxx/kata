---
phase: 02.2-normalize-on-skills
plan: 03
type: execute
wave: 2
depends_on: ["02.2-01", "02.2-02"]
files_modified:
  - commands/kata/ (deleted)
  - README.md
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "commands/kata/ directory no longer exists"
    - "README documents new invocation syntax"
    - "CLAUDE.md reflects skills-only architecture"
    - "Users understand how to invoke Kata after update"
  artifacts:
    - path: "README.md"
      provides: "Updated installation and usage documentation"
      contains: "/kata:planning-phases"
    - path: "CLAUDE.md"
      provides: "Updated architecture documentation"
      contains: "Skills are the primary interface"
  key_links:
    - from: "README.md Commands section"
      to: "User invocation"
      via: "Documentation of new syntax"
      pattern: "/kata:"
---

<objective>
Delete the commands layer and update documentation to reflect the skills-only architecture.

Purpose: With skills now user-invocable (Plan 01) and build.js transforming prefixes (Plan 02), the command wrapper layer is redundant. Documentation must be updated to guide users to the new invocation syntax.

Output: commands/kata/ deleted, README.md and CLAUDE.md updated with new architecture.
</objective>

<context>
@.planning/ROADMAP.md
@README.md
@CLAUDE.md

**Dependencies:**
- Plan 01 complete: Skills have `user-invocable: true`
- Plan 02 complete: Build strips kata- prefix for plugin

**Commands to delete (27 files):**
- commands/kata/help.md
- commands/kata/issue-debug.md
- commands/kata/milestone-audit.md
- commands/kata/milestone-complete.md
- commands/kata/milestone-new.md
- commands/kata/milestone-plan-gaps.md
- commands/kata/models-config.md
- commands/kata/phase-add.md
- commands/kata/phase-assumptions.md
- commands/kata/phase-discuss.md
- commands/kata/phase-execute.md
- commands/kata/phase-insert.md
- commands/kata/phase-pause.md
- commands/kata/phase-plan.md
- commands/kata/phase-remove.md
- commands/kata/phase-research.md
- commands/kata/phase-resume.md
- commands/kata/phase-verify.md
- commands/kata/project-analyze.md
- commands/kata/project-new.md
- commands/kata/project-status.md
- commands/kata/settings-config.md
- commands/kata/task-execute.md
- commands/kata/todos-add.md
- commands/kata/todos-list.md
- commands/kata/update.md
- commands/kata/whats-new.md

**Documentation changes needed:**

README.md:
- Update command table to show new syntax
- Plugin: `/kata:command-name` -> `/kata:skill-name` (without kata- prefix)
- NPX: `/kata:command-name` -> `/kata-skill-name`
- Update troubleshooting section

CLAUDE.md:
- Remove "Commands" from core architecture
- Update Skills vs Commands table
- Update "Available Skills" section
- Remove "Verify commands installed" section
</context>

<tasks>

<task type="auto">
  <name>Task 1: Delete commands/kata/ directory</name>
  <files>commands/kata/</files>
  <action>
Delete the entire commands/kata/ directory:

```bash
rm -rf commands/kata/
```

Verify commands directory is empty or remove it too if appropriate:

```bash
ls commands/
# If only kata/ was there, remove commands/ too
rmdir commands 2>/dev/null || true
```

Note: Keep `commands/` if it contains other directories or files not related to kata.
  </action>
  <verify>
```bash
# Verify commands/kata/ is gone
test -d commands/kata && echo "FAIL: still exists" || echo "OK: deleted"

# Count remaining files (should be 0)
find commands/ -name "*.md" 2>/dev/null | wc -l
```
  </verify>
  <done>commands/kata/ directory deleted (27 files removed)</done>
</task>

<task type="auto">
  <name>Task 2: Update build.js COMMON_INCLUDES</name>
  <files>scripts/build.js</files>
  <action>
Remove 'commands/kata' from COMMON_INCLUDES since the directory no longer exists:

```javascript
const COMMON_INCLUDES = [
  // 'commands/kata',  // REMOVED - commands layer eliminated
  'skills',
  'agents',
  'hooks',
  'CHANGELOG.md',
];
```

Also remove from PLUGIN_EXCLUDES if present:
```javascript
const PLUGIN_EXCLUDES = [
  // 'commands/kata/update.md',  // REMOVED - commands layer eliminated
  'skills/kata-updating',
];
```
  </action>
  <verify>
```bash
# Verify no commands reference in COMMON_INCLUDES
grep "commands" scripts/build.js | grep -v "//" | head -5
# Should show nothing (or only commented out)

# Run build to verify it works without commands
node scripts/build.js all
```
  </verify>
  <done>build.js no longer references commands/kata</done>
</task>

<task type="auto">
  <name>Task 3: Update README.md documentation</name>
  <files>README.md</files>
  <action>
Update README.md to reflect the new skills-only architecture.

**Section: Commands (rename to "Skills" or update in place)**

Update the command tables to show the new invocation syntax:

Old syntax: `/kata:phase-plan [N]`
New syntax (plugin): `/kata:phase-plan [N]` (unchanged for users - plugin strips prefix)
New syntax (npx): `/kata-planning-phases [N]`

The key change is in how we describe the mapping. The actual slash command names change:

| Old Command | New Skill (Plugin) | New Skill (NPX) |
| `/kata:project-new` | `/kata:starting-projects` | `/kata-starting-projects` |
| `/kata:phase-plan` | `/kata:planning-phases` | `/kata-planning-phases` |
| `/kata:phase-execute` | `/kata:executing-phases` | `/kata-executing-phases` |

**Update the Commands section table** to reflect skill names:

```markdown
## Commands

> **Note:** All commands respond to natural language. "What's my progress?" works the same as the explicit slash command.

### Core Workflow

| Command (Plugin) | Command (NPX) | What it does |
| ---------------- | ------------- | ------------ |
| `/kata:starting-projects` | `/kata-starting-projects` | Full initialization: questions -> research -> requirements -> roadmap |
| `/kata:discussing-phases [N]` | `/kata-discussing-phases [N]` | Capture implementation decisions before planning |
| `/kata:planning-phases [N]` | `/kata-planning-phases [N]` | Research + plan + verify for a phase |
| `/kata:executing-phases <N>` | `/kata-executing-phases <N>` | Execute all plans in parallel waves |
| `/kata:verifying-work [N]` | `/kata-verifying-work [N]` | Manual user acceptance testing |
| `/kata:auditing-milestones` | `/kata-auditing-milestones` | Verify milestone achieved definition of done |
| `/kata:completing-milestones` | `/kata-completing-milestones` | Archive milestone, tag release |
| `/kata:starting-milestones [name]` | `/kata-starting-milestones [name]` | Start next version cycle |
```

Update all command references throughout the README to use the new syntax.

**Update Troubleshooting section:**

Old:
```
- Verify files exist in `~/.claude/commands/kata/` (global) or `./.claude/commands/kata/` (local)
```

New:
```
- Verify skills exist in `~/.claude/skills/kata-*` (NPX) or `./.claude/skills/*` (plugin - prefixes stripped)
```

**Important:** Keep the document readable. The key message is:
- Natural language still works ("plan phase 2")
- Plugin users: `/kata:skill-name`
- NPX users: `/kata-skill-name`
  </action>
  <verify>
```bash
# Verify README no longer references commands/kata/
grep -c "commands/kata" README.md
# Should be 0

# Verify new skill references exist
grep "/kata:planning-phases\|/kata-planning-phases" README.md | head -3
```
  </verify>
  <done>README.md updated with new invocation syntax</done>
</task>

<task type="auto">
  <name>Task 4: Update CLAUDE.md architecture documentation</name>
  <files>CLAUDE.md</files>
  <action>
Update CLAUDE.md to reflect skills-only architecture.

**Update Core Architecture section:**

Old:
```markdown
**Core Architecture:**
- **Commands** (slash commands in `commands/kata/`) — Thin orchestrators that delegate to workflows
- **Workflows** (`kata/workflows/`) — Detailed process logic with step-by-step execution
```

New:
```markdown
**Core Architecture:**
- **Skills** (`skills/kata-*/SKILL.md`) — Primary interface for all Kata workflows
- **Agents** (`agents/kata-*.md`) — Specialized subagents spawned by skills
- **Templates** (`kata/templates/`) — Structured output formats
- **References** (`kata/references/`) — Deep-dive documentation
```

**Remove the "Skills vs Commands" table** since there are no commands:

Delete the entire "### Skills vs Commands" section.

**Update the "Skills Architecture" section:**

Remove references to commands being the "explicit invocation" method. Skills are now both natural language AND explicit invocation.

**Update installation verification:**

Old:
```bash
# Verify commands installed
ls ~/.claude/commands/kata/  # global
ls .claude/commands/kata/    # local
```

New:
```bash
# Verify skills installed
ls ~/.claude/skills/kata-*   # NPX global
ls .claude/skills/kata-*     # NPX local
ls .claude/skills/*          # Plugin (prefixes stripped)
```

**Update the "Available Skills" table** to show the invocation names:

Add a column for "Invocation" showing `/kata:skill-name` (plugin) or `/kata-skill-name` (NPX).
  </action>
  <verify>
```bash
# Verify CLAUDE.md no longer references commands/kata/
grep -c "commands/kata" CLAUDE.md
# Should be 0

# Verify skills are described as primary interface
grep -i "primary interface\|skills are" CLAUDE.md | head -3
```
  </verify>
  <done>CLAUDE.md updated to reflect skills-only architecture</done>
</task>

<task type="auto">
  <name>Task 5: Commit all changes</name>
  <files>commands/, README.md, CLAUDE.md, scripts/build.js</files>
  <action>
Stage all changes and commit:

```bash
# Stage deletions
git add -A commands/

# Stage modifications
git add README.md CLAUDE.md scripts/build.js

# Commit
git commit -m "feat(02.2-03): remove commands layer, update documentation

BREAKING CHANGE: commands/kata/ directory removed

- Delete 27 command wrapper files
- Update README with new skill invocation syntax
- Update CLAUDE.md architecture documentation
- Update build.js to remove commands from COMMON_INCLUDES

Migration:
- Plugin: /kata:command-name -> /kata:skill-name (automatic)
- NPX: /kata:command-name -> /kata-skill-name

Co-Authored-By: Claude <noreply@anthropic.com>"
```
  </action>
  <verify>
```bash
git log -1 --oneline
git status
# Should be clean
```
  </verify>
  <done>All changes committed with migration notes</done>
</task>

</tasks>

<verification>
After completion:
- [ ] `commands/kata/` directory deleted
- [ ] `node scripts/build.js all` succeeds
- [ ] `ls dist/plugin/skills/` shows skills without kata- prefix
- [ ] `ls dist/npm/skills/` shows skills with kata- prefix
- [ ] README.md documents new invocation syntax
- [ ] CLAUDE.md reflects skills-only architecture
- [ ] All changes committed
</verification>

<success_criteria>
- commands/kata/ directory removed (27 files)
- build.js updated to not reference commands
- README documents plugin syntax: `/kata:skill-name`
- README documents NPX syntax: `/kata-skill-name`
- CLAUDE.md shows skills as primary interface
- Clean git commit with BREAKING CHANGE note
</success_criteria>

<output>
After completion, create `.planning/phases/v1.0.9-02.2-normalize-on-skills/02.2-03-SUMMARY.md`
</output>
