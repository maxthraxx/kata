---
phase: v0.1.9-01.1-document-pr-workflow-behavior
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - kata/references/planning-config.md
autonomous: true

must_haves:
  truths:
    - "Developer can look up branch naming convention"
    - "Developer understands PR-per-phase workflow timing"
    - "Developer knows release = milestone relationship"
    - "Developer sees which commands change with pr_workflow: true"
  artifacts:
    - path: "kata/references/planning-config.md"
      provides: "Complete pr_workflow documentation"
      contains: "branch naming|PR granularity|release-milestone|workflow timing"
  key_links:
    - from: "kata/references/planning-config.md"
      to: "kata workflows"
      via: "command behavior tables"
      pattern: "execute-phase|complete-milestone|progress"
---

<objective>
Document complete pr_workflow config behavior in planning-config.md

Purpose: Developers need clear reference documentation for how pr_workflow: true changes Kata behavior â€” branch naming, PR lifecycle, release timing, and command integration points.

Output: Expanded `<pr_workflow_behavior>` section with all decisions from CONTEXT.md
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/v0.1.9-01.1-document-pr-workflow-behavior/01.1-CONTEXT.md

@kata/references/planning-config.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite pr_workflow_behavior section</name>
  <files>kata/references/planning-config.md</files>
  <action>
Replace the existing `<pr_workflow_behavior>` section (lines 91-122) with comprehensive documentation covering:

**Branch Naming Convention:**
- Pattern: `{type}/v{milestone}-{phase}-{slug}`
- Examples: `feat/v0.1.9-01-plugin-structure-validation`, `fix/v0.1.9-01.1-document-pr-workflow`
- Prefix follows commit type conventions (feat/, fix/, docs/)
- Branch timing: Create after planning complete, before execution

**PR Granularity & Lifecycle:**
- One PR per phase (not per-plan, not per-milestone)
- Open as draft at first commit
- Mark ready when phase execution complete
- PR title format: `v{milestone} Phase {N}: {Phase Name}`
- PR body: Phase goal + bullet summary of plans + test checklist

**Release-Milestone Relationship:**
- Release = milestone (1:1 mapping)
- Milestone name IS the version (v0.1.9 milestone -> v0.1.9 release)
- Release trigger: Merge to main with version bump (publish.yml detects)
- Version bump timing: User bumps before /kata:complete-milestone

**Workflow Timing:**
- When to create branch
- When to open PR
- When to mark ready
- When to merge

**Integration Points Table:**
Document which commands check pr_workflow and behavior changes:
| Command | pr_workflow: false | pr_workflow: true |
|---------|-------------------|-------------------|
| new-project | Asks about config | Offers GitHub Actions scaffold |
| settings | Allows toggle | Same |
| execute-phase | Commits to main | Create branch, open draft PR |
| complete-milestone | Creates local tag | Skips tag, defer to GitHub Release |
| progress | Phase status only | Show PR status |

Keep the bash config reading example. Match the formatting style of other sections in the file.
  </action>
  <verify>Read kata/references/planning-config.md and confirm all 5 success criteria topics are covered: branch naming, PR-per-phase, release=milestone, workflow timing, integration points</verify>
  <done>pr_workflow_behavior section contains complete documentation for all decided behaviors</done>
</task>

<task type="auto">
  <name>Task 2: Verify documentation completeness</name>
  <files>kata/references/planning-config.md</files>
  <action>
Review the updated pr_workflow_behavior section against phase success criteria:

1. Branch naming convention documented: `feat/v{milestone}-{phase}-{name}` - CHECK
2. PR-per-phase workflow documented (one PR per phase, merged to main) - CHECK
3. Release = milestone relationship documented - CHECK
4. Workflow timing documented (when to create branch, open PR, merge) - CHECK
5. Integration points table shows which commands change - CHECK

Also verify:
- No contradictions with other sections in planning-config.md
- Bash examples are syntactically correct
- Formatting matches existing section style (headings, code blocks, tables)

If any gaps found, fix them.
  </action>
  <verify>grep -E "branch naming|PR.*phase|release.*milestone|workflow timing|execute-phase.*branch" kata/references/planning-config.md returns matches for all criteria</verify>
  <done>Documentation covers all 5 success criteria and is internally consistent</done>
</task>

</tasks>

<verification>
Run verification checks:

```bash
# Verify all key topics present
grep -c "branch" kata/references/planning-config.md   # Should be > 5
grep -c "PR" kata/references/planning-config.md       # Should be > 10
grep -c "milestone" kata/references/planning-config.md # Should be > 5
grep -c "execute-phase" kata/references/planning-config.md # Should be >= 2

# Verify section exists and has content
grep -A 5 "<pr_workflow_behavior>" kata/references/planning-config.md
```
</verification>

<success_criteria>
- [ ] Branch naming pattern `{type}/v{milestone}-{phase}-{slug}` documented with examples
- [ ] PR-per-phase workflow documented (draft -> ready -> merge)
- [ ] Release = milestone relationship documented (1:1 mapping)
- [ ] Workflow timing documented (when to branch, PR, merge)
- [ ] Integration points table shows command behavior changes
</success_criteria>

<output>
After completion, create `.planning/phases/v0.1.9-01.1-document-pr-workflow-behavior/01.1-01-SUMMARY.md`
</output>
