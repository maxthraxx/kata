---
phase: 00-convert-commands-to-skills
plan: 09
type: execute
wave: 3
depends_on: ["00-01", "00-02", "00-03", "00-04", "00-05", "00-06", "00-07", "00-08"]
files_modified:
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "CLAUDE.md documents the 8 new skills"
    - "Documentation explains skill vs command usage"
    - "Installation section mentions skills directory"
  artifacts:
    - path: "CLAUDE.md"
      provides: "Updated project documentation with skills"
      contains: "skills/kata-"
  key_links:
    - from: "CLAUDE.md"
      to: "skills/"
      via: "documentation reference"
      pattern: "skills/"
---

<objective>
Update CLAUDE.md documentation to reflect the new skills architecture.

Purpose: Ensure project documentation explains the new skills system so future Claude instances understand the architecture.

Output: Updated CLAUDE.md with skills documentation
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

# Current documentation to update
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update CLAUDE.md with skills documentation</name>
  <files>CLAUDE.md</files>
  <action>
Read CLAUDE.md and add a new section documenting the skills architecture:

1. Add a new section "## Skills Architecture" after the "Architecture: Files Teach Claude" section:

```markdown
## Skills Architecture

Kata provides skills for autonomous invocation alongside slash commands for deterministic execution.

### Skills vs Commands

| Aspect     | Skills                        | Commands                        |
| ---------- | ----------------------------- | ------------------------------- |
| Invocation | Autonomous (Claude decides)   | Explicit (`/kata:command`)      |
| Arguments  | From natural language context | `$ARGUMENTS`                    |
| Use case   | "Help me plan phase 2"        | `/kata:phase-plan 2 --research` |

### Available Skills

Skills are installed to `~/.claude/skills/` (global) or `.claude/skills/` (local):

| Skill                           | Purpose                        | Sub-agents Spawned                                         |
| ------------------------------- | ------------------------------ | ---------------------------------------------------------- |
| `kata-planning-phases`          | Phase planning, task breakdown | kata-planner, kata-plan-checker                            |
| `kata-execution`                | Plan execution, checkpoints    | kata-executor                                              |
| `kata-verification`             | Goal verification, UAT         | kata-verifier, kata-debugger                               |
| `kata-starting-project-news`    | New project setup              | kata-project-researcher, kata-roadmapper                   |
| `kata-manageing-milestones`     | Milestone operations           | kata-roadmapper                                            |
| `kata-managing-project-roadmap` | Phase operations               | kata-roadmapper                                            |
| `kata-researching-phases`       | Domain research                | kata-phase-researcher, kata-researching-phases-synthesizer |
| `kata-utility`                  | Progress, debug, mapping       | kata-debugger, kata-codebase-mapper                        |

### Skill Structure

Each skill follows the pattern:

```
skills/kata-{name}/
├── SKILL.md         # Orchestrator workflow (<500 lines)
└── references/      # Progressive disclosure
    ├── {topic}.md
    └── ...
```

Skills ARE orchestrators. They spawn sub-agents via Task tool, not the other way around.
```

2. Update the "Installation and Testing" section to mention skills:
   - Add verification command: `ls ~/.claude/skills/kata-*`

3. Update the "Making Changes to Kata" section:
   - Add: "When modifying skills, follow the /building-claude-code-skills methodology"
   - Add: "Keep SKILL.md under 500 lines, move details to references/"
  </action>
  <verify>
    - grep "Skills Architecture" CLAUDE.md returns match
    - grep "kata-planning-phases" CLAUDE.md returns match
    - grep "skills/kata-" CLAUDE.md returns match
  </verify>
  <done>
    - CLAUDE.md has "Skills Architecture" section documenting all 8 skills
    - Skills vs Commands comparison table exists
    - Skill structure pattern documented
  </done>
</task>

<task type="auto">
  <name>Task 2: Test full installation</name>
  <files></files>
  <action>
Run a full local installation test to verify all skills are installed correctly:

1. Run installer:
   ```bash
   node bin/install.js --local
   ```

2. Verify all 8 skill directories exist:
   ```bash
   ls .claude/skills/
   ```
   Expected: kata-planning-phases, kata-execution, kata-verification, kata-starting-project-news,
             kata-manageing-milestones, kata-managing-project-roadmap, kata-researching-phases, kata-utility

3. Verify each skill has SKILL.md and references/:
   ```bash
   for skill in .claude/skills/kata-*; do
     echo "=== $skill ==="
     ls "$skill"
   done
   ```

4. Verify SKILL.md files have correct frontmatter:
   ```bash
   for skill in .claude/skills/kata-*/SKILL.md; do
     echo "=== $skill ==="
     head -5 "$skill"
   done
   ```

5. Clean up test installation (optional - keep for manual testing):
   ```bash
   # rm -rf .claude/skills/kata-*
   ```
  </action>
  <verify>
    - node bin/install.js --local shows "Installed skills"
    - ls .claude/skills/ shows 8 kata-* directories
    - Each skill has SKILL.md with name: and description: frontmatter
  </verify>
  <done>
    - Full installation test passes
    - All 8 skills installed with correct structure
    - Each SKILL.md has proper frontmatter
  </done>
</task>

</tasks>

<verification>
1. CLAUDE.md updated with Skills Architecture section
2. All 8 skills documented with purpose and sub-agents
3. Installation test shows all skills installed correctly
4. Each skill has proper SKILL.md frontmatter (name, description only)
</verification>

<success_criteria>
- CLAUDE.md has Skills Architecture section
- All 8 skills listed with purpose
- `node bin/install.js --local` installs all skills
- Manual verification of skill structure passes
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-09-SUMMARY.md`
</output>
