---
phase: 00-convert-commands-to-skills
plan: 08
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - skills/kata-utility/SKILL.md
  - skills/kata-utility/references/progress-display.md
  - skills/kata-utility/references/session-management.md
  - skills/kata-utility/references/codebase-mapping.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /kata-utility skill from natural language"
    - "Skill handles progress, debug, phase-resume, phase-pause, project-analyze operations"
    - "Skill spawns kata-debugger and kata-codebase-mapper sub-agents"
  artifacts:
    - path: "skills/kata-utility/SKILL.md"
      provides: "Utility operations orchestrator skill"
      max_lines: 500
    - path: "skills/kata-utility/references/progress-display.md"
      provides: "Progress visualization format"
    - path: "skills/kata-utility/references/session-management.md"
      provides: "Pause/resume workflow"
  key_links:
    - from: "skills/kata-utility/SKILL.md"
      to: "agents/kata-debugger.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-debugger"
    - from: "skills/kata-utility/SKILL.md"
      to: "agents/kata-codebase-mapper.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-codebase-mapper"
---

<objective>
Create the kata-utility skill for utility operations.

Purpose: Handles progress display, debugging, session management (pause/resume), and codebase mapping.

Output: skills/kata-utility/ directory with SKILL.md and references/
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

# Skill-building methodology
@~/.claude/skills/building-claude-code-skills/SKILL.md
@~/.claude/skills/building-claude-code-skills/converting-slash-commands-to-skills.md

# Current implementation to extract workflow from
@commands/kata/progress.md
@commands/kata/debug.md
@commands/kata/phase-pause.md
@commands/kata/phase-resume.md
@commands/kata/project-analyze.md
@agents/kata-debugger.md
@agents/kata-codebase-mapper.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-utility skill with references</name>
  <files>
    skills/kata-utility/SKILL.md
    skills/kata-utility/references/progress-display.md
    skills/kata-utility/references/session-management.md
    skills/kata-utility/references/codebase-mapping.md
  </files>
  <action>
Create the kata-utility skill following /building-claude-code-skills methodology:

1. Create skills/kata-utility/SKILL.md:
   - Frontmatter: name (kata-utility), description (trigger-focused, 3rd person)
   - Description includes: "progress", "status", "debug", "diagnose", "pause work", "resume work", "map codebase", "analyze code", "where am I", "what's next"
   - NO allowed-tools, model, agent, context fields
   - Core workflow (~400 lines max):
     * Determine operation from natural language (progress, debug, pause, resume, map)
     * For PROGRESS:
       - Load STATE.md and ROADMAP.md
       - Calculate completion percentages
       - Display progress visualization
       - Show next steps
     * For DEBUG:
       - Gather context about issue
       - Spawn kata-debugger for diagnosis
       - Present findings and recommendations
     * For PAUSE:
       - Save current state to .planning/PAUSE.md
       - Record context for resume
       - Confirm paused state
     * For RESUME:
       - Load .planning/PAUSE.md
       - Restore context
       - Continue from saved point
     * For project-analyze:
       - Spawn kata-codebase-mapper
       - Analyze project structure
       - Generate codebase documentation in .planning/codebase/
   - Reference supporting files with relative paths

2. Create references/progress-display.md:
   - Progress bar format
   - Phase completion calculation
   - Plan completion tracking
   - Performance metrics (velocity, avg duration)
   - Next steps display
   - "Where am I" quick summary

3. Create references/session-management.md:
   - PAUSE.md structure
   - State capture for pause
   - Context restoration for resume
   - Handling interrupted work
   - Dirty state warnings

4. Create references/codebase-mapping.md:
   - .planning/codebase/ structure
   - STACK.md format
   - ARCHITECTURE.md format
   - CONVENTIONS.md format
   - STRUCTURE.md format
   - Selective loading based on phase type

Extract content from:
- commands/kata/progress.md (has progress display)
- commands/kata/debug.md (has debug workflow)
- commands/kata/phase-pause.md (has pause workflow)
- commands/kata/phase-resume.md (has resume workflow)
- commands/kata/project-analyze.md (has mapping workflow)
- agents/kata-debugger.md (has debugging methodology)
- agents/kata-codebase-mapper.md (has mapping methodology)
  </action>
  <verify>
    - ls skills/kata-utility/ shows SKILL.md and references/ directory
    - wc -l skills/kata-utility/SKILL.md shows less than 500 lines
    - grep "name: kata-utility" skills/kata-utility/SKILL.md returns match
    - grep "Task" skills/kata-utility/SKILL.md shows sub-agent spawning
    - ls skills/kata-utility/references/ shows 3 files
  </verify>
  <done>
    - SKILL.md exists with proper frontmatter (name, description only)
    - SKILL.md under 500 lines with workflow that spawns kata-debugger, kata-codebase-mapper
    - 3 reference files exist with progress, session management, and codebase mapping
  </done>
</task>

</tasks>

<verification>
1. Skill structure follows /building-claude-code-skills methodology
2. SKILL.md has proper frontmatter (name and description only)
3. SKILL.md under 500 lines with workflow referencing ./references/*.md
4. All 3 reference files contain extracted content from command/agent files
</verification>

<success_criteria>
- skills/kata-utility/SKILL.md exists with orchestrator workflow
- skills/kata-utility/references/ contains 3 reference files
- Skill handles progress, debug, pause, resume, and map operations
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-08-SUMMARY.md`
</output>
