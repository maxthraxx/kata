---
phase: 00-convert-commands-to-skills
plan: 03
type: execute
wave: 2
depends_on: ["00-01"]
files_modified:
  - skills/kata-verification/SKILL.md
  - skills/kata-verification/references/goal-backward-verification.md
  - skills/kata-verification/references/uat-protocol.md
  - skills/kata-verification/references/debugging-workflow.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /kata-verification skill from natural language"
    - "Skill spawns kata-verifier and kata-debugger sub-agents"
    - "Skill produces VERIFICATION.md and optional UAT.md files"
  artifacts:
    - path: "skills/kata-verification/SKILL.md"
      provides: "Work verification orchestrator skill"
      max_lines: 500
    - path: "skills/kata-verification/references/goal-backward-verification.md"
      provides: "Must-haves verification methodology"
    - path: "skills/kata-verification/references/uat-protocol.md"
      provides: "User acceptance testing protocol"
  key_links:
    - from: "skills/kata-verification/SKILL.md"
      to: "agents/kata-verifier.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-verifier"
    - from: "skills/kata-verification/SKILL.md"
      to: "agents/kata-debugger.md"
      via: "Task tool spawn"
      pattern: "Task.*kata-debugger"
---

<objective>
Create the kata-verification skill for verifying work against goals.

Purpose: Handles goal-backward verification of phase work, UAT preparation, and debug coordination when verification fails.

Output: skills/kata-verification/ directory with SKILL.md and references/
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

# Skill-building methodology
@~/.claude/skills/building-claude-code-skills/SKILL.md
@~/.claude/skills/building-claude-code-skills/converting-slash-commands-to-skills.md

# Current implementation to extract workflow from
@commands/kata/phase-verify.md
@commands/kata/debug.md
@agents/kata-verifier.md
@agents/kata-debugger.md
@kata/workflows/phase-verify.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-verification skill with references</name>
  <files>
    skills/kata-verification/SKILL.md
    skills/kata-verification/references/goal-backward-verification.md
    skills/kata-verification/references/uat-protocol.md
    skills/kata-verification/references/debugging-workflow.md
  </files>
  <action>
Create the kata-verification skill following /building-claude-code-skills methodology:

1. Create skills/kata-verification/SKILL.md:
   - Frontmatter: name (kata-verification), description (trigger-focused, 3rd person)
   - Description includes: "verify work", "check phase", "goal verification", "UAT", "test acceptance", "debug", "diagnose issues"
   - NO allowed-tools, model, agent, context fields
   - Core workflow (~300 lines max):
     * Extract phase number from natural language context
     * Load phase goal and must_haves from ROADMAP.md and PLAN.md files
     * Load SUMMARYs from executed plans
     * Spawn kata-verifier to check against must_haves:
       - Check truths (observable behaviors)
       - Check artifacts (files exist with required content)
       - Check key_links (connections verified via grep patterns)
     * If gaps found:
       - Create VERIFICATION.md with gap analysis
       - Optionally spawn kata-debugger for diagnosis
       - Offer gap closure planning
     * If verification passes:
       - Offer UAT preparation
       - Spawn kata-verifier for UAT script generation
   - Reference supporting files with relative paths

2. Create references/goal-backward-verification.md:
   - must_haves structure (truths, artifacts, key_links)
   - Verification methodology for each type
   - Gap classification (missing artifact, broken link, untrue)
   - Gap diagnosis output format
   - When to trigger gap closure planning

3. Create references/uat-protocol.md:
   - UAT.md structure
   - User testing scenarios derivation
   - Test script format
   - Result capture format
   - Pass/fail determination

4. Create references/debugging-workflow.md:
   - When to invoke kata-debugger
   - Debug information gathering
   - Issue diagnosis approach
   - Fix recommendation format
   - Integration with gap closure

Extract content from:
- agents/kata-verifier.md (has verification methodology)
- agents/kata-debugger.md (has debugging workflow)
- kata/workflows/phase-verify.md (has orchestration flow)
- commands/kata/phase-verify.md (has UAT handling)
  </action>
  <verify>
    - ls skills/kata-verification/ shows SKILL.md and references/ directory
    - wc -l skills/kata-verification/SKILL.md shows less than 500 lines
    - grep "name: kata-verification" skills/kata-verification/SKILL.md returns match
    - grep "Task" skills/kata-verification/SKILL.md shows sub-agent spawning
    - ls skills/kata-verification/references/ shows 3 files
  </verify>
  <done>
    - SKILL.md exists with proper frontmatter (name, description only)
    - SKILL.md under 500 lines with workflow that spawns kata-verifier, kata-debugger
    - 3 reference files exist with verification, UAT, and debugging content
  </done>
</task>

</tasks>

<verification>
1. Skill structure follows /building-claude-code-skills methodology
2. SKILL.md has proper frontmatter (name and description only)
3. SKILL.md under 500 lines with workflow referencing ./references/*.md
4. All 3 reference files contain extracted content from agent/workflow files
</verification>

<success_criteria>
- skills/kata-verification/SKILL.md exists with orchestrator workflow
- skills/kata-verification/references/ contains 3 reference files
- Skill can spawn kata-verifier and kata-debugger via Task tool
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-03-SUMMARY.md`
</output>
