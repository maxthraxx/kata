---
phase: 01.2-skill-tests
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - tests/skills/kata-debugging-kata-workflow-issues.test.js
  - tests/skills/kata-executing-project-phases.test.js
  - tests/skills/kata-manageing-milestones.test.js
autonomous: true

must_haves:
  truths:
    - "kata-debugging-kata-workflow-issues triggers on 'plan failed' prompt"
    - "kata-executing-project-phases triggers on 'execute phase' prompt"
    - "kata-manageing-milestones triggers on 'new milestone' prompt"
  artifacts:
    - path: "tests/skills/kata-debugging-kata-workflow-issues.test.js"
      provides: "Trigger tests for debugging skill"
      min_lines: 30
    - path: "tests/skills/kata-executing-project-phases.test.js"
      provides: "Trigger tests for execution skill"
      min_lines: 30
    - path: "tests/skills/kata-manageing-milestones.test.js"
      provides: "Trigger tests for milestone skill"
      min_lines: 30
  key_links:
    - from: "tests/skills/*.test.js"
      to: "tests/harness/claude-cli.js"
      via: "import invokeClaude"
      pattern: "import.*invokeClaude.*from.*harness/claude-cli"
---

<objective>
Create test files for the first batch of 3 skills: kata-debugging-kata-workflow-issues, kata-executing-project-phases, and kata-manageing-milestones.

Purpose: Verify these skills trigger correctly on natural language prompts.
Output: Three test files following the established pattern from kata-managing-todos.test.js.
</objective>

<execution_context>
@./.claude/kata/workflows/execute-plan.md
@./.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@tests/skills/kata-managing-todos.test.js
@tests/harness/claude-cli.js
@tests/harness/assertions.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-debugging-kata-workflow-issues.test.js</name>
  <files>tests/skills/kata-debugging-kata-workflow-issues.test.js</files>
  <action>
Create test file following the exact pattern from kata-managing-todos.test.js:
- Import node:test, fs functions, path functions, harness modules
- Set up FIXTURES_DIR and KATA_ROOT paths
- Create describe block for 'kata-debugging-kata-workflow-issues skill'
- beforeEach: create temp dir, copy fixtures, install skill from skills/kata-debugging-kata-workflow-issues
- afterEach: cleanup temp dir

Add trigger tests using phrases from the skill's description:
- "plan failed" - should trigger DEBUG-KATA operation
- "kata isn't working" - should trigger DEBUG-KATA operation

Each test:
1. invokeClaude with prompt, cwd: testDir, maxBudget: 2.00, timeout: 180000
2. assertNoError(result)
3. assertSkillInvoked(result, 'description')
  </action>
  <verify>node --test tests/skills/kata-debugging-kata-workflow-issues.test.js runs without syntax errors</verify>
  <done>Test file exists at tests/skills/kata-debugging-kata-workflow-issues.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 2: Create kata-executing-project-phases.test.js</name>
  <files>tests/skills/kata-executing-project-phases.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup as Task 1
- Install skill from skills/kata-executing-project-phases

Add trigger tests using phrases from the skill's description:
- "execute phase 1" - should trigger execution workflow
- "start phase 1" - should trigger execution workflow
- "run the plans" - should trigger execution workflow

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --test tests/skills/kata-executing-project-phases.test.js runs without syntax errors</verify>
  <done>Test file exists at tests/skills/kata-executing-project-phases.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 3: Create kata-manageing-milestones.test.js</name>
  <files>tests/skills/kata-manageing-milestones.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup
- Install skill from skills/kata-manageing-milestones

Add trigger tests using phrases from the skill's description:
- "new milestone" - should trigger NEW operation
- "create milestone" - should trigger NEW operation
- "complete milestone" - should trigger COMPLETE operation

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --test tests/skills/kata-manageing-milestones.test.js runs without syntax errors</verify>
  <done>Test file exists at tests/skills/kata-manageing-milestones.test.js with at least 2 trigger tests</done>
</task>

</tasks>

<verification>
```bash
# Verify all three test files exist
ls -la tests/skills/kata-debugging-kata-workflow-issues.test.js
ls -la tests/skills/kata-executing-project-phases.test.js
ls -la tests/skills/kata-manageing-milestones.test.js

# Verify syntax (dry run)
node --check tests/skills/kata-debugging-kata-workflow-issues.test.js
node --check tests/skills/kata-executing-project-phases.test.js
node --check tests/skills/kata-manageing-milestones.test.js
```
</verification>

<success_criteria>
- [ ] kata-debugging-kata-workflow-issues.test.js exists with 2+ trigger tests
- [ ] kata-executing-project-phases.test.js exists with 2+ trigger tests
- [ ] kata-manageing-milestones.test.js exists with 2+ trigger tests
- [ ] All three files pass syntax check (node --check)
- [ ] Tests follow established pattern from kata-managing-todos.test.js
</success_criteria>

<output>
After completion, create `.planning/phases/01.2-skill-tests/01.2-01-SUMMARY.md`
</output>
