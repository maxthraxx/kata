---
phase: 01.2-skill-tests
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - tests/skills/kata-researching-phases.test.js
  - tests/skills/kata-starting-project-news.test.js
  - tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js
autonomous: true

must_haves:
  truths:
    - "kata-researching-phases triggers on 'research phase' prompt"
    - "kata-starting-project-news triggers on 'new project' prompt"
    - "kata-verifying-work-outcomes-and-user-acceptance-testing triggers on 'run uat' prompt"
  artifacts:
    - path: "tests/skills/kata-researching-phases.test.js"
      provides: "Trigger tests for research skill"
      min_lines: 30
    - path: "tests/skills/kata-starting-project-news.test.js"
      provides: "Trigger tests for new project skill"
      min_lines: 30
    - path: "tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js"
      provides: "Trigger tests for verification skill"
      min_lines: 30
  key_links:
    - from: "tests/skills/*.test.js"
      to: "tests/harness/claude-cli.js"
      via: "import invokeClaude"
      pattern: "import.*invokeClaude.*from.*harness/claude-cli"
---

<objective>
Create test files for the third batch of 3 skills: kata-researching-phases, kata-starting-project-news, and kata-verifying-work-outcomes-and-user-acceptance-testing.

Purpose: Verify these skills trigger correctly on natural language prompts.
Output: Three test files following the established pattern from kata-managing-todos.test.js.
</objective>

<execution_context>
@./.claude/kata/workflows/execute-plan.md
@./.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@tests/skills/kata-managing-todos.test.js
@tests/harness/claude-cli.js
@tests/harness/assertions.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-researching-phases.test.js</name>
  <files>tests/skills/kata-researching-phases.test.js</files>
  <action>
Create test file following the exact pattern from kata-managing-todos.test.js:
- Import node:test, fs functions, path functions, harness modules
- Set up FIXTURES_DIR and KATA_ROOT paths
- Create describe block for 'kata-researching-phases skill'
- beforeEach: create temp dir, copy fixtures, install skill from skills/kata-researching-phases
- afterEach: cleanup temp dir

Add trigger tests using phrases from the skill's description:
- "research phase 1" - should trigger Research operation
- "investigate how to build phase 1" - should trigger Research operation
- "discuss phase 1" - should trigger Discuss operation

Each test: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-researching-phases.test.js</verify>
  <done>Test file exists at tests/skills/kata-researching-phases.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 2: Create kata-starting-project-news.test.js</name>
  <files>tests/skills/kata-starting-project-news.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup
- Install skill from skills/kata-starting-project-news

Add trigger tests using phrases from the skill's description:
- "new project" - should trigger initialization workflow
- "start a project" - should trigger initialization workflow
- "initialize kata" - should trigger initialization workflow

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-starting-project-news.test.js</verify>
  <done>Test file exists at tests/skills/kata-starting-project-news.test.js with at least 2 trigger tests</done>
</task>

<task type="auto">
  <name>Task 3: Create kata-verifying-work-outcomes-and-user-acceptance-testing.test.js</name>
  <files>tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js</files>
  <action>
Create test file following the exact pattern:
- Same imports, setup, and cleanup
- Install skill from skills/kata-verifying-work-outcomes-and-user-acceptance-testing

Add trigger tests using phrases from the skill's description:
- "run kata uat" - should trigger UAT workflow (note: use "kata uat" to avoid test suite trigger)
- "verify phase 1" - should trigger goal-backward verification
- "did it work" - should trigger verification workflow

Each test uses same pattern: invokeClaude, assertNoError, assertSkillInvoked
  </action>
  <verify>node --check tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js</verify>
  <done>Test file exists at tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js with at least 2 trigger tests</done>
</task>

</tasks>

<verification>
```bash
# Verify all three test files exist
ls -la tests/skills/kata-researching-phases.test.js
ls -la tests/skills/kata-starting-project-news.test.js
ls -la tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js

# Verify syntax (dry run)
node --check tests/skills/kata-researching-phases.test.js
node --check tests/skills/kata-starting-project-news.test.js
node --check tests/skills/kata-verifying-work-outcomes-and-user-acceptance-testing.test.js
```
</verification>

<success_criteria>
- [ ] kata-researching-phases.test.js exists with 2+ trigger tests
- [ ] kata-starting-project-news.test.js exists with 2+ trigger tests
- [ ] kata-verifying-work-outcomes-and-user-acceptance-testing.test.js exists with 2+ trigger tests
- [ ] All three files pass syntax check (node --check)
- [ ] Tests follow established pattern from kata-managing-todos.test.js
</success_criteria>

<output>
After completion, create `.planning/phases/01.2-skill-tests/01.2-03-SUMMARY.md`
</output>
