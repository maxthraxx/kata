---
phase: 02-create-kata-slash-commands
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - commands/kata/phase-add.md
  - commands/kata/phase-insert.md
  - commands/kata/phase-remove.md
  - commands/kata/roadmap-plan-gaps.md
  - commands/kata/phase-discuss.md
  - commands/kata/phase-research.md
  - commands/kata/phase-assumptions.md
autonomous: true

must_haves:
  truths:
    - "User can invoke /kata:phase-add to add a phase to roadmap"
    - "User can invoke /kata:phase-insert to insert urgent phase"
    - "User can invoke /kata:phase-discuss to gather pre-planning context"
  artifacts:
    - path: "commands/kata/phase-add.md"
      provides: "Add phase command"
      contains: "disable-model-invocation: true"
    - path: "commands/kata/phase-insert.md"
      provides: "Insert phase command"
      contains: "disable-model-invocation: true"
    - path: "commands/kata/phase-discuss.md"
      provides: "Discuss phase command"
      contains: "disable-model-invocation: true"
  key_links:
    - from: "commands/kata/phase-add.md"
      to: "skills/kata-managing-project-roadmap"
      via: "Skill delegation"
      pattern: "kata-managing-project-roadmap"
    - from: "commands/kata/phase-discuss.md"
      to: "skills/kata-discussing-phase-context"
      via: "Skill delegation"
      pattern: "kata-discussing-phase-context"
---

<objective>
Create slash commands for roadmap management and phase research.

Purpose: Provide explicit invocation paths for roadmap operations and pre-planning research
Output: 7 command files in commands/kata/ directory
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-create-kata-slash-commands/02-CONTEXT.md

# Reference skills for delegation targets
@skills/kata-managing-project-roadmap/SKILL.md
@skills/kata-discussing-phase-context/SKILL.md
@skills/kata-researching-phases/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create roadmap commands</name>
  <files>commands/kata/phase-add.md, commands/kata/phase-insert.md, commands/kata/phase-remove.md, commands/kata/roadmap-plan-gaps.md</files>
  <action>
**commands/kata/phase-add.md:**
- name: kata:phase-add
- description: Add a new phase to the end of the current milestone roadmap
- argument-hint: "<phase-name>"
- Body: Delegate to kata-managing-project-roadmap skill with operation="add". Pass $ARGUMENTS as phase name. AskUserQuestion if no name provided.

**commands/kata/phase-insert.md:**
- name: kata:phase-insert
- description: Insert an urgent phase between existing phases using decimal numbering
- argument-hint: "<after-phase> <phase-name>"
- Body: Delegate to kata-managing-project-roadmap skill with operation="insert". Parse $ARGUMENTS for position and name. Example: "2 hotfix" inserts Phase 2.1: hotfix after Phase 2.

**commands/kata/phase-remove.md:**
- name: kata:phase-remove
- description: Remove a future phase from the roadmap (cannot remove completed phases)
- argument-hint: "<phase-number>"
- Body: Delegate to kata-managing-project-roadmap skill with operation="remove". Pass $ARGUMENTS as phase number. Confirm with user before removal.

**commands/kata/roadmap-plan-gaps.md:**
- name: kata:roadmap-plan-gaps
- description: Analyze milestone for requirement coverage gaps and suggest new phases
- argument-hint: "" (no args - analyzes current milestone)
- Body: Delegate to kata-managing-project-roadmap skill with operation="plan-gaps"
  </action>
  <verify>
```bash
ls commands/kata/phase-*.md commands/kata/roadmap-*.md
grep "disable-model-invocation" commands/kata/phase-add.md
```
  </verify>
  <done>4 roadmap commands created with proper frontmatter</done>
</task>

<task type="auto">
  <name>Task 2: Create research/discussion commands</name>
  <files>commands/kata/phase-discuss.md, commands/kata/phase-research.md, commands/kata/phase-assumptions.md</files>
  <action>
**commands/kata/phase-discuss.md:**
- name: kata:phase-discuss
- description: Gather implementation context through adaptive questioning before planning
- argument-hint: "<phase-number>"
- Body: Delegate to kata-discussing-phase-context skill. Pass $ARGUMENTS as phase number. AskUserQuestion if no phase provided.

**commands/kata/phase-research.md:**
- name: kata:phase-research
- description: Research phase domain, explore technical approaches, gather implementation context
- argument-hint: "<phase-number>"
- Body: Delegate to kata-researching-phases skill with mode="research". Pass $ARGUMENTS as phase number.

**commands/kata/phase-assumptions.md:**
- name: kata:phase-assumptions
- description: List and validate assumptions for a phase before planning
- argument-hint: "<phase-number>"
- Body: Delegate to kata-researching-phases skill with mode="assumptions". Pass $ARGUMENTS as phase number.
  </action>
  <verify>
```bash
ls commands/kata/phase-discuss.md commands/kata/phase-research.md commands/kata/phase-assumptions.md
grep "kata-discussing-phase-context\|kata-researching-phases" commands/kata/phase-*.md
```
  </verify>
  <done>3 research/discussion commands created with proper frontmatter</done>
</task>

</tasks>

<verification>
All 7 commands exist with correct frontmatter:

```bash
# Count new commands
ls commands/kata/*.md | wc -l  # Should be 14 total (7 from 02-02 + 7 from 02-03)

# Verify roadmap commands delegate correctly
grep -l "kata-managing-project-roadmap" commands/kata/*.md

# Verify research commands delegate correctly
grep -l "kata-researching-phases\|kata-discussing-phase-context" commands/kata/*.md
```
</verification>

<success_criteria>
- [ ] 7 command files exist (phase-add, phase-insert, phase-remove, roadmap-plan-gaps, phase-discuss, phase-research, phase-assumptions)
- [ ] All commands have `disable-model-invocation: true` in frontmatter
- [ ] All commands delegate to corresponding skills
- [ ] Commands follow noun-verb naming pattern
</success_criteria>

<output>
After completion, create `.planning/phases/02-create-kata-slash-commands/02-03-SUMMARY.md`
</output>
