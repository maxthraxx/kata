---
phase: 00-convert-commands-to-skills
plan: 09
type: execute
wave: 3
depends_on: [00-05, 00-06, 00-07, 00-08]
files_modified:
  - commands/kata/help.md
  - commands/kata/whats-new.md
  - commands/kata/update.md
  - agents/kata-integration-checker.md
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "/kata:help shows command documentation"
    - "All commands work with updated skills structure"
    - "Integration checker agent has skills in frontmatter"
  artifacts:
    - path: "CLAUDE.md"
      provides: "Updated documentation mentioning skills directory"
      contains: "skills"
  key_links:
    - from: "agents/kata-integration-checker.md"
      to: "skills/"
      via: "skills: frontmatter field"
      pattern: "skills:"
---

<objective>
Update remaining commands (help, whats-new, update) and integration checker agent. Update CLAUDE.md documentation to reflect new skills structure.

Purpose: Complete the command-to-skill conversion and update project documentation.

Output: Updated command-only files, integration checker with skills, updated CLAUDE.md.
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files:
@commands/kata/help.md
@commands/kata/whats-new.md
@commands/kata/update.md
@agents/kata-integration-checker.md
@CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update command-only files (no skill needed)</name>
  <files>
    commands/kata/help.md,
    commands/kata/whats-new.md,
    commands/kata/update.md
  </files>
  <action>
    These commands remain command-only (no skill needed):

    **commands/kata/help.md (~383 lines):**
    - This is documentation/help - no skill needed
    - Update to reflect new skills directory structure
    - Add section explaining skills vs commands
    - Keep as command-only

    **commands/kata/whats-new.md (~142 lines):**
    - This shows changelog - no skill needed
    - Keep as command-only

    **commands/kata/update.md (~226 lines):**
    - This handles updates - no skill needed
    - Keep as command-only
    - Ensure it handles skills/ directory in updates
  </action>
  <verify>
    grep -c "skills" commands/kata/help.md returns > 0 (mentions skills).
    Commands still work as expected.
  </verify>
  <done>Command-only files updated with skills awareness.</done>
</task>

<task type="auto">
  <name>Task 2: Update integration checker and CLAUDE.md</name>
  <files>
    agents/kata-integration-checker.md,
    CLAUDE.md
  </files>
  <action>
    **agents/kata-integration-checker.md (~423 lines):**
    - Add `skills: kata-verification, kata-execution` to frontmatter
    - Keep integration checking logic
    - May stay larger since it has specialized logic

    **CLAUDE.md:**
    - Add skills/ to the Project Overview architecture section
    - Update the directory structure to include skills/
    - Add brief explanation:
      ```
      - **Skills** (`skills/`) â€” Domain knowledge for autonomous invocation
      ```
    - Update installation section to mention skills directory
    - Note: Skills use FLAT naming (skills/kata-planning/ NOT skills/kata/planning/)
  </action>
  <verify>
    grep "skills:" agents/kata-integration-checker.md succeeds.
    grep "skills/" CLAUDE.md succeeds.
  </verify>
  <done>Integration checker has skills, CLAUDE.md documents skills structure.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete skills conversion across all commands, agents, and documentation</what-built>
  <how-to-verify>
    Run comprehensive verification:

    1. Verify all skills exist (FLAT naming):
       ```bash
       ls skills/*/SKILL.md
       ```
       Expected: 8 SKILL.md files (kata-planning, kata-execution, kata-verification, kata-project-initialization, kata-milestone-management, kata-roadmap-management, kata-research, kata-utility)

    2. Verify all commands have skills field (except command-only):
       ```bash
       for f in commands/kata/*.md; do
         name=$(basename $f)
         if [[ "$name" != "help.md" && "$name" != "whats-new.md" && "$name" != "update.md" ]]; then
           grep -l "skills:" "$f" || echo "MISSING: $f"
         fi
       done
       ```

    3. Verify all agents have skills field:
       ```bash
       for f in agents/*.md; do
         grep -l "skills:" "$f" || echo "MISSING: $f"
       done
       ```

    4. Verify install script includes skills:
       ```bash
       grep "skills" bin/install.js
       ```

    5. Test local install:
       ```bash
       node bin/install.js --local
       ls .claude/skills/
       ```

    If any verification fails, review the specific plan that should have created that artifact.
  </how-to-verify>
  <resume-signal>Type "approved" if all verifications pass, or describe which checks failed</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. 8 skill directories exist with SKILL.md files (FLAT naming: skills/kata-*)
2. 21 commands have skills: field (24 - 3 command-only)
3. 11 agents have skills: field
4. bin/install.js copies skills/ directory
5. Local install succeeds with skills accessible
6. CLAUDE.md documents skills structure
</verification>

<success_criteria>
- [ ] help.md updated with skills documentation
- [ ] kata-integration-checker has skills: in frontmatter
- [ ] CLAUDE.md mentions skills/ directory structure
- [ ] All 8 skills exist with proper SKILL.md files
- [ ] All non-command-only commands have skills: field
- [ ] All agents have skills: field
- [ ] Local install succeeds with skills
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-09-SUMMARY.md`
</output>
