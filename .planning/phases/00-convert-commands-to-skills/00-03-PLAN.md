---
phase: 00-convert-commands-to-skills
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-verification/SKILL.md
  - skills/kata-verification/references/verification-patterns.md
  - skills/kata-verification/references/uat-protocol.md
  - commands/kata/verify-work.md
  - agents/kata-verifier.md
  - agents/kata-debugger.md
autonomous: true

must_haves:
  truths:
    - "/kata:verify-work verifies phase completion against must_haves"
    - "Claude autonomously invokes kata-verification when asked to verify work"
    - "kata-verifier agent has access to verification skill knowledge"
  artifacts:
    - path: "skills/kata-verification/SKILL.md"
      provides: "Core verification workflow with trigger-focused description"
      min_lines: 100
    - path: "skills/kata-verification/references/verification-patterns.md"
      provides: "Truth checking, artifact verification, link testing"
      min_lines: 50
    - path: "commands/kata/verify-work.md"
      provides: "Thin wrapper with skills: kata-verification in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/verify-work.md"
      to: "skills/kata-verification/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-verification"
    - from: "agents/kata-verifier.md"
      to: "skills/kata-verification"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-verification"
    - from: "agents/kata-debugger.md"
      to: "skills/kata-verification"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-verification"
---

<objective>
Create the kata-verification skill from existing verify-work command, workflows, and kata-verifier agent content.

Purpose: Enable autonomous skill invocation for work verification while preserving deterministic /kata:verify-work execution.

Output: skills/kata-verification/ directory with SKILL.md and references/, updated command and agent frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-verification/` NOT `skills/kata/kata-verification/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/verify-work.md
@agents/kata-verifier.md
@agents/kata-debugger.md
@kata/workflows/verify-work.md
@kata/workflows/verify-phase.md
@kata/references/verification-patterns.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-verification skill structure</name>
  <files>
    skills/kata-verification/SKILL.md,
    skills/kata-verification/references/verification-patterns.md,
    skills/kata-verification/references/uat-protocol.md
  </files>
  <action>
    Create skills/kata-verification/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~150-200 lines):**
    - Frontmatter: name: kata-verification, description with trigger phrases ("verify work", "check phase completion", "validate must_haves", "run verification", "test phase goals")
    - Extract core workflow from kata-verifier.md and verify-work.md:
      - Verification philosophy (codebase over SUMMARY claims)
      - Truth verification overview
      - Artifact verification overview
      - Key link testing overview
      - Gap identification and reporting
    - Reference detailed files in references/
    - Keep under 500 lines

    **references/verification-patterns.md:**
    - Extract from kata/references/verification-patterns.md:
      - Truth verification methodology
      - Artifact file checks
      - Export/function verification
      - Link pattern testing
      - Gap reporting format

    **references/uat-protocol.md:**
    - Extract from verify-work.md and kata-verifier.md:
      - User acceptance testing flow
      - Issue reporting format
      - Fix planning triggers
      - Human verification patterns
  </action>
  <verify>
    ls skills/kata-verification/ shows SKILL.md and references/ directory.
    wc -l skills/kata-verification/SKILL.md is between 100-500 lines.
    grep "name: kata-verification" skills/kata-verification/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md and 2 reference files containing verification domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update verify-work command and verification agents</name>
  <files>
    commands/kata/verify-work.md,
    agents/kata-verifier.md,
    agents/kata-debugger.md
  </files>
  <action>
    **commands/kata/verify-work.md:**
    - Add `skills: kata-verification` to frontmatter
    - Add `context: fork` to frontmatter
    - Keep orchestrator logic
    - Add @-reference to skill

    **agents/kata-verifier.md:**
    - Add `skills: kata-verification` to frontmatter (after tools: line)
    - Remove detailed content that now lives in skill
    - Keep: role, core verification steps as summary, structured returns
    - Target ~200-300 lines (down from ~778)

    **agents/kata-debugger.md:**
    - Add `skills: kata-verification` to frontmatter (debugger uses verification patterns)
    - NOTE: No kata-debugging skill exists - kata-debugger uses kata-verification for verification context
    - Keep debugging-specific logic within the agent (unique to debugger role)
    - Debugger may stay larger since it has unique logic
  </action>
  <verify>
    grep "skills:" commands/kata/verify-work.md succeeds.
    grep "skills:" agents/kata-verifier.md succeeds.
    grep "skills:.*kata-verification" agents/kata-debugger.md succeeds.
    wc -l agents/kata-verifier.md is under 400 lines.
  </verify>
  <done>Command and agents have skills: frontmatter, content deduplicated to skill.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-verification/` shows SKILL.md and references/
2. `grep "skills:" commands/kata/verify-work.md` succeeds
3. `grep "skills:" agents/kata-verifier.md` succeeds
4. `grep "skills:.*kata-verification" agents/kata-debugger.md` succeeds (debugger references kata-verification, not kata-debugging)
5. Skill has trigger-focused description for autonomous invocation
</verification>

<success_criteria>
- [ ] kata-verification skill exists with SKILL.md + 2 reference files
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] verify-work command has skills: kata-verification in frontmatter
- [ ] kata-verifier agent has skills: kata-verification in frontmatter
- [ ] kata-debugger agent has skills: kata-verification in frontmatter (NOT kata-debugging)
- [ ] Agent content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-03-SUMMARY.md`
</output>
