---
phase: 00-convert-commands-to-skills
plan: 07
type: execute
wave: 2
depends_on: [00-01, 00-02, 00-03, 00-04]
files_modified:
  - skills/kata-research/SKILL.md
  - skills/kata-research/references/research-methodology.md
  - commands/kata/research-phase.md
  - commands/kata/discuss-phase.md
  - agents/kata-phase-researcher.md
  - agents/kata-research-synthesizer.md
autonomous: true

must_haves:
  truths:
    - "/kata:research-phase researches domain before planning"
    - "/kata:discuss-phase explores phase scope with user"
    - "Claude autonomously invokes kata-research when research is needed"
    - "kata-phase-researcher agent has access to research skill knowledge"
    - "kata-research-synthesizer agent has access to research skill knowledge"
  artifacts:
    - path: "skills/kata-research/SKILL.md"
      provides: "Core research workflow"
      min_lines: 100
    - path: "commands/kata/research-phase.md"
      provides: "Thin wrapper with skills: kata-research in frontmatter"
      contains: "skills:"
  key_links:
    - from: "commands/kata/research-phase.md"
      to: "skills/kata-research/SKILL.md"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-research"
    - from: "agents/kata-phase-researcher.md"
      to: "skills/kata-research"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-research"
    - from: "agents/kata-research-synthesizer.md"
      to: "skills/kata-research"
      via: "skills: frontmatter field"
      pattern: "skills:.*kata-research"
---

<objective>
Create the kata-research skill from existing research commands and agents.

Purpose: Enable autonomous skill invocation for domain research while preserving deterministic command execution.

Output: skills/kata-research/ directory with SKILL.md and references/, updated command and agent frontmatter.

**CRITICAL: Skills use FLAT directory naming. Use `skills/kata-research/` NOT `skills/kata/kata-research/`**
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00-convert-commands-to-skills/00-RESEARCH.md

Source files to extract from:
@commands/kata/research-phase.md
@commands/kata/discuss-phase.md
@agents/kata-phase-researcher.md
@agents/kata-research-synthesizer.md
@kata/workflows/discuss-phase.md
@kata/workflows/discovery-phase.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create kata-research skill structure</name>
  <files>
    skills/kata-research/SKILL.md,
    skills/kata-research/references/research-methodology.md
  </files>
  <action>
    Create skills/kata-research/ directory structure (FLAT naming, no nested kata/ folder).

    **SKILL.md (~150-200 lines):**
    - Frontmatter: name: kata-research, description with trigger phrases ("research domain", "explore technology", "research phase", "discuss phase", "investigate options", "domain research", "technology research")
    - Extract core workflow from research commands and agents:
      - Research philosophy (avoid hand-rolling, use established patterns)
      - Discovery levels (Level 0-3)
      - Research output format (RESEARCH.md)
      - Discussion flow summary
    - Reference detailed file in references/
    - Keep under 500 lines

    **references/research-methodology.md:**
    - Extract from agents and workflows:
      - Research depth levels
      - Source prioritization (primary, secondary, tertiary)
      - Standard stack identification
      - Anti-pattern documentation
      - Common pitfalls discovery
      - RESEARCH.md template
  </action>
  <verify>
    ls skills/kata-research/ shows SKILL.md and references/ directory.
    wc -l skills/kata-research/SKILL.md is between 100-500 lines.
    grep "name: kata-research" skills/kata-research/SKILL.md succeeds.
  </verify>
  <done>Skill directory exists with SKILL.md and 1 reference file containing research domain knowledge.</done>
</task>

<task type="auto">
  <name>Task 2: Update research commands and agents</name>
  <files>
    commands/kata/research-phase.md,
    commands/kata/discuss-phase.md,
    agents/kata-phase-researcher.md,
    agents/kata-research-synthesizer.md
  </files>
  <action>
    **commands/kata/research-phase.md (~180 lines):**
    - Add `skills: kata-research` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill

    **commands/kata/discuss-phase.md (~80 lines):**
    - Add `skills: kata-research` to frontmatter
    - Keep all content (already small)
    - Add @-reference to skill

    **agents/kata-phase-researcher.md (~632 lines):**
    - Add `skills: kata-research` to frontmatter
    - Remove detailed content that now lives in skill
    - Keep: role, research process summary, structured returns
    - Target ~200-300 lines

    **agents/kata-research-synthesizer.md (~247 lines):**
    - Add `skills: kata-research` to frontmatter
    - Keep most content (reasonable size)
    - Add @-reference to skill
  </action>
  <verify>
    grep "skills:" commands/kata/research-phase.md succeeds.
    grep "skills:" commands/kata/discuss-phase.md succeeds.
    grep "skills:" agents/kata-phase-researcher.md succeeds.
    grep "skills:" agents/kata-research-synthesizer.md succeeds.
    wc -l agents/kata-phase-researcher.md is under 350 lines.
  </verify>
  <done>Research commands and agents have skills: frontmatter, agent content deduplicated.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `ls skills/kata-research/` shows SKILL.md and references/
2. Both research commands have `skills:` in frontmatter
3. Both research agents have `skills:` in frontmatter (kata-phase-researcher AND kata-research-synthesizer)
4. kata-phase-researcher reduced from ~632 to ~200-300 lines
</verification>

<success_criteria>
- [ ] kata-research skill exists with SKILL.md + 1 reference file
- [ ] SKILL.md has trigger-focused description for autonomous invocation
- [ ] research-phase command has skills: kata-research in frontmatter
- [ ] discuss-phase command has skills: kata-research in frontmatter
- [ ] kata-phase-researcher agent has skills: kata-research in frontmatter
- [ ] kata-research-synthesizer agent has skills: kata-research in frontmatter
- [ ] Agent content deduplicated (moved to skill)
</success_criteria>

<output>
After completion, create `.planning/phases/00-convert-commands-to-skills/00-07-SUMMARY.md`
</output>
