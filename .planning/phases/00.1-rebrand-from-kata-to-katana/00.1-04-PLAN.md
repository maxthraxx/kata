---
phase: 00.1-rebrand-from-kata-to-katana
plan: 04
type: execute
wave: 4
depends_on: ["00.1-03"]
files_modified: [commands/katana/*.md, agents/katana-*.md]
autonomous: true

must_haves:
  truths:
    - "All command files have katana: prefix in YAML frontmatter"
    - "All /kata: and /gsd: references updated to /katana:"
    - "All agent files reference katana paths"
  artifacts:
    - path: "commands/katana/new-project.md"
      provides: "New project command with katana: prefix"
      contains: "name: katana:new-project"
    - path: "commands/katana/execute-phase.md"
      provides: "Execute phase command with katana: prefix"
      contains: "name: katana:execute-phase"
    - path: "agents/katana-planner.md"
      provides: "Planner agent with katana paths"
      contains: "katana/"
  key_links:
    - from: "commands/katana/*.md"
      to: "agents/katana-*.md"
      via: "agent references in commands"
      pattern: "katana-"
---

<objective>
Update command and agent file contents with Katana naming.

Purpose: Commands define the user interface (/katana:* prefix) and agents define the AI behavior. Both must use consistent Katana naming.
Output: All 24+ command files and 11 agent files updated with Katana references.
</objective>

<execution_context>
@~/.claude/katana/workflows/execute-plan.md
@~/.claude/katana/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/00.1-rebrand-from-kata-to-katana/00.1-RESEARCH.md
@.planning/phases/00.1-rebrand-from-kata-to-katana/00.1-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update command file contents</name>
  <files>commands/katana/*.md</files>
  <action>
    For each file in commands/katana/*.md:

    1. Update YAML frontmatter "name:" field:
       - Change "name: kata:command-name" to "name: katana:command-name"
       - Change "name: gsd:command-name" to "name: katana:command-name"

    2. Update internal references:
       - Replace /kata: with /katana: in all command references
       - Replace /gsd: with /katana: in all command references
       - Replace kata/ with katana/ in all file paths
       - Replace kata- with katana- in all file references
       - Replace "Kata" with "Katana" in prose

    3. Update @-references:
       - @~/.claude/kata/ -> @~/.claude/katana/
       - @kata/ -> @katana/

    IMPORTANT: Process all 24+ command files systematically.
  </action>
  <verify>grep -l "kata:" commands/katana/*.md | wc -l (should be 0)</verify>
  <done>All command files use katana: prefix and katana paths</done>
</task>

<task type="auto">
  <name>Task 2: Update agent file contents</name>
  <files>agents/katana-*.md</files>
  <action>
    For each file in agents/katana-*.md:

    1. Update file path references:
       - Replace kata/ with katana/ in all paths
       - Replace kata- with katana- in all file references
       - Replace @~/.claude/kata/ with @~/.claude/katana/

    2. Update command references:
       - Replace /kata: with /katana:
       - Replace /gsd: with /katana:

    3. Update prose:
       - Replace "Kata" with "Katana"
       - Replace "kata" with "katana" (when referring to project)

    4. Update agent name references within content if they reference other agents

    IMPORTANT: Process all 11 agent files systematically.
  </action>
  <verify>grep -l "/kata:\|kata/" agents/katana-*.md | wc -l (should be 0)</verify>
  <done>All agent files use katana paths and references</done>
</task>

<task type="auto">
  <name>Task 3: Commit command and agent updates</name>
  <files>commands/katana/, agents/</files>
  <action>
    Stage and commit all content updates with message:
    "refactor(00.1): update commands and agents to Katana naming"

    Do NOT push yet - this is part of a larger rebrand.
  </action>
  <verify>git log -1 --oneline (shows update commit)</verify>
  <done>Command and agent updates committed</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `grep -r "kata:" commands/katana/` returns no matches
- [ ] `grep -r "gsd:" commands/katana/` returns no matches
- [ ] `grep -r "/kata:" agents/` returns no matches
- [ ] `grep -r "kata/" agents/` returns no matches (excluding historical references)
- [ ] `grep -r "katana:" commands/katana/*.md` shows all command files have correct prefix
- [ ] `git status` shows clean
</verification>

<success_criteria>
- All 24+ command files have katana: prefix
- All 11 agent files use katana paths
- No orphaned /kata: or /gsd: references
- Changes committed
</success_criteria>

<output>
After completion, create `.planning/phases/00.1-rebrand-from-kata-to-katana/00.1-04-SUMMARY.md`
</output>
