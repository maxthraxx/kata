---
phase: 02.1-skill-resource-restructure
plan: 05
type: execute
wave: 4
depends_on: ["02.1-04"]
files_modified:
  - kata/references/ (deleted)
  - kata/templates/ (deleted)
  - kata/workflows/ (deleted)
autonomous: true

must_haves:
  truths:
    - "No shared kata/references/, kata/templates/, kata/workflows/ directories exist"
    - "kata/ directory only contains bin/ and VERSION file"
    - "All skills and agents are fully self-contained"
  artifacts:
    - path: "kata/"
      provides: "Minimal kata directory (bin only)"
      contains: "bin/, VERSION"
  key_links: []
---

<objective>
Remove shared kata/ resource directories now that all resources are bundled in skills and agents.

Purpose: Complete the restructure by removing the shared resources that are no longer needed, confirming skills are fully self-contained.

Output: Clean kata/ directory containing only bin/ and VERSION, no shared resources.
</objective>

<context>
@.planning/phases/v1.0.6-02.1-skill-resource-restructure/02.1-RESEARCH.md

**Directories to remove:**
- kata/references/ (9 files - now in skills/agents)
- kata/templates/ (22+ files - now in skills)
- kata/workflows/ (12 files - now in skills)

**Keep:**
- kata/bin/ - install scripts for npx distribution
- kata/VERSION - version tracking

**Safety check:** Before removing, verify no remaining references to these paths anywhere in codebase.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Final verification of no kata/ references</name>
  <files></files>
  <action>
    Before removing shared resources, perform final check that no files still reference them:

    ```bash
    # Check all source files for any remaining kata/ references
    grep -rn "@~/.claude/kata/" --include="*.md" . 2>/dev/null | grep -v ".planning/" | grep -v "dist/" || echo "No refs found"

    # Also check for references without the ~ prefix
    grep -rn "@\.\/kata/" --include="*.md" . 2>/dev/null | grep -v ".planning/" | grep -v "dist/" || echo "No refs found"
    ```

    If any matches found, they must be fixed before proceeding.
  </action>
  <verify>
    ```bash
    grep -rn "@~/.claude/kata/" --include="*.md" skills/ agents/ commands/ 2>/dev/null | wc -l
    ```
    Should return 0.
  </verify>
  <done>Final verification confirms no remaining references to shared kata/ resources.</done>
</task>

<task type="auto">
  <name>Task 2: Remove shared kata/ resource directories</name>
  <files>
    kata/references/ (deleted)
    kata/templates/ (deleted)
    kata/workflows/ (deleted)
  </files>
  <action>
    Remove the shared resource directories:

    ```bash
    rm -rf kata/references/
    rm -rf kata/templates/
    rm -rf kata/workflows/
    ```

    **Do NOT remove:**
    - kata/bin/ - needed for npx install scripts
    - kata/VERSION - needed for version tracking
  </action>
  <verify>
    ```bash
    ls kata/
    ```
    Should only show: bin/ and VERSION (and possibly .DS_Store on macOS)
  </verify>
  <done>Shared kata/references/, kata/templates/, kata/workflows/ directories removed.</done>
</task>

<task type="auto">
  <name>Task 3: Verify skills still work with local resources</name>
  <files></files>
  <action>
    Verify that a few key skills can still find their resources by checking the references/ subdirectories:

    ```bash
    # Spot check high-traffic skills
    ls skills/kata-executing-phases/references/
    ls skills/kata-starting-projects/references/
    ls skills/kata-planning-phases/references/

    # Verify agents
    ls agents/references/
    ```

    All should show the expected files.
  </action>
  <verify>
    ```bash
    # Verify key resources exist in skills
    [ -f skills/kata-executing-phases/references/phase-execute.md ] && echo "phase-execute.md exists"
    [ -f skills/kata-starting-projects/references/project-template.md ] && echo "project-template.md exists"
    [ -f agents/references/checkpoints.md ] && echo "checkpoints.md exists"
    ```
  </verify>
  <done>Skills and agents have their bundled resources and shared directories are removed.</done>
</task>

</tasks>

<verification>
- kata/ directory only contains bin/ and VERSION
- No kata/references/, kata/templates/, or kata/workflows/ directories exist
- All skills have their own references/ subdirectories
- agents/ has its own references/ subdirectory
- Build still succeeds: `node scripts/build.js all`
</verification>

<success_criteria>
- [ ] No remaining @~/.claude/kata/ references in source files
- [ ] kata/references/ directory removed
- [ ] kata/templates/ directory removed
- [ ] kata/workflows/ directory removed
- [ ] kata/bin/ and kata/VERSION preserved
- [ ] `node scripts/build.js all` still succeeds
- [ ] Skill references/ subdirectories intact
</success_criteria>

<output>
After completion, create `.planning/phases/v1.0.6-02.1-skill-resource-restructure/02.1-05-SUMMARY.md`
</output>
