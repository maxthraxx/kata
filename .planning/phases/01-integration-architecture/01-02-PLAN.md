---
phase: 01-integration-architecture
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - .claude/skills/github-integration/SKILL.md
  - .claude/skills/github-integration/events.md
  - .claude/skills/github-integration/config.md
  - .claude/skills/github-integration/templates/issue.md
  - .claude/skills/github-integration/templates/pr.md
  - .planning/integrations/INTEGRATIONS.md
autonomous: true

must_haves:
  truths:
    - "GitHub integration is packaged as an Agent Skill"
    - "Integration documents what GSD events trigger what GitHub actions"
    - "Integration is registered in INTEGRATIONS.md (not hardcoded)"
    - "Adding Linear integration would follow the same pattern"
  artifacts:
    - path: ".claude/skills/github-integration/SKILL.md"
      provides: "GitHub integration capability definition"
      contains: "github-integration"
      min_lines: 40
    - path: ".claude/skills/github-integration/events.md"
      provides: "GSD event to GitHub action mappings"
      contains: "phase:complete"
    - path: ".claude/skills/github-integration/templates/issue.md"
      provides: "GitHub issue creation template"
      contains: "## Title"
    - path: ".claude/skills/github-integration/templates/pr.md"
      provides: "GitHub PR creation template"
      contains: "## Summary"
  key_links:
    - from: ".claude/skills/github-integration/SKILL.md"
      to: ".planning/integrations/INTEGRATIONS.md"
      via: "integration registered in registry"
      pattern: "github.*enabled"
    - from: ".claude/skills/github-integration/events.md"
      to: ".planning/integrations/events.jsonl"
      via: "skill reads events from hook output"
      pattern: "events\\.jsonl"
---

<objective>
Create the GitHub integration as an Agent Skill that demonstrates the integration architecture pattern.

Purpose: Prove that the integration architecture works by implementing GitHub as the first integration. This skill will sync GSD phases with GitHub Issues and create PRs from completed work. The implementation must use the hook/registry pattern from Plan 01 - not hardcoded calls.

Output: GitHub integration skill at `.claude/skills/github-integration/` with capability definition, event mappings, and templates. Integration registered in INTEGRATIONS.md.
</objective>

<execution_context>
@~/.claude/kata/workflows/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-integration-architecture/01-RESEARCH.md
@.planning/phases/01-integration-architecture/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GitHub integration skill structure</name>
  <files>
    .claude/skills/github-integration/SKILL.md
    .claude/skills/github-integration/events.md
    .claude/skills/github-integration/config.md
  </files>
  <action>
Create the GitHub integration as an Agent Skill following Claude Code patterns:

1. Create `.claude/skills/github-integration/SKILL.md`:
```yaml
---
name: github-integration
description: |
  Integrates GSD workflow with GitHub. Creates issues from phases,
  PRs from completed work, syncs status bidirectionally.
  Activates when: executing phases, completing plans, reviewing PRs.
---
```

Then in the markdown body:
- Overview explaining the integration purpose
- Capabilities section (Issue Sync, PR Creation, Status Sync, PR Reviews)
- Configuration reference pointing to config.md
- Event Mappings reference pointing to events.md
- Templates reference pointing to templates/
- Usage section explaining automatic activation based on context

2. Create `.claude/skills/github-integration/events.md`:
   - Document each GSD event this integration responds to
   - Table format: GSD Event | GitHub Action | Condition
   - Events to map:
     - phase:start -> Update linked issue to "In Progress"
     - phase:complete -> Create PR, update issue status
     - plan:start -> Comment on linked issue with plan details
     - plan:complete -> Comment progress on linked issue
   - Reference events.jsonl as the source of event data

3. Create `.claude/skills/github-integration/config.md`:
   - Document all configuration options
   - Reference .planning/integrations/github/config.json
   - Explain each setting: enabled, repo, issue_sync, pr_creation
   - Include examples of typical configurations
   - Note: MCP server used for GitHub API (https://api.githubcopilot.com/mcp/)
   - Fallback: gh CLI for operations MCP doesn't support
  </action>
  <verify>
    - `cat .claude/skills/github-integration/SKILL.md` shows frontmatter with name: github-integration
    - `cat .claude/skills/github-integration/events.md` documents phase:complete event
    - `cat .claude/skills/github-integration/config.md` references config.json location
  </verify>
  <done>
    - SKILL.md exists with proper frontmatter and capability documentation
    - events.md maps 4 GSD events to GitHub actions
    - config.md documents all configuration options
  </done>
</task>

<task type="auto">
  <name>Task 2: Create GitHub templates and register integration</name>
  <files>
    .claude/skills/github-integration/templates/issue.md
    .claude/skills/github-integration/templates/pr.md
    .planning/integrations/INTEGRATIONS.md
  </files>
  <action>
Create GitHub templates and register the integration:

1. Create `.claude/skills/github-integration/templates/issue.md`:
   - Template for creating GitHub issues from GSD phases
   - Placeholders: {{phase_name}}, {{phase_goal}}, {{requirements}}
   - Sections: Title, Description, Acceptance Criteria, Labels
   - Default labels: gsd:phase, type:feature

2. Create `.claude/skills/github-integration/templates/pr.md`:
   - Template for creating GitHub PRs from completed phases
   - Placeholders: {{phase_name}}, {{summary}}, {{commits}}, {{linked_issue}}
   - Sections: Summary, Changes, Testing, Linked Issues
   - Include checkbox for "Closes #{{issue_number}}"

3. Update `.planning/integrations/INTEGRATIONS.md`:
   - Add github integration to Active Integrations table:
     | github | enabled | github-integration | github/config.json |
   - Add GitHub Integration Events subsection under Event Subscriptions
   - Reference .claude/skills/github-integration/events.md for full mappings

Read the existing INTEGRATIONS.md first, then update it with the GitHub registration.
  </action>
  <verify>
    - `cat .claude/skills/github-integration/templates/issue.md` shows {{phase_name}} placeholder
    - `cat .claude/skills/github-integration/templates/pr.md` shows {{summary}} placeholder
    - `grep "github" .planning/integrations/INTEGRATIONS.md` shows github in Active Integrations
    - `grep "github-integration" .planning/integrations/INTEGRATIONS.md` shows skill reference
  </verify>
  <done>
    - Issue template exists with phase placeholders
    - PR template exists with summary and linked issue placeholders
    - INTEGRATIONS.md shows github as enabled integration
    - Integration pattern is complete and extensible
  </done>
</task>

</tasks>

<verification>
GitHub integration verified when:
1. Skill structure follows Claude Code Agent Skills pattern
2. Event mappings are documented (not hardcoded in commands)
3. Templates use placeholders (not hardcoded values)
4. Integration is registered in INTEGRATIONS.md
5. No modifications to core GSD files
</verification>

<success_criteria>
- GitHub integration packaged as Agent Skill at .claude/skills/github-integration/
- SKILL.md has proper frontmatter with name and description
- events.md documents 4 GSD event -> GitHub action mappings
- Templates use placeholders for dynamic content
- INTEGRATIONS.md shows github as enabled with skill reference
- Pattern is clearly extensible (Linear integration would follow same structure)
</success_criteria>

<output>
After completion, create `.planning/phases/01-integration-architecture/01-02-SUMMARY.md`
</output>
