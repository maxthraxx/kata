---
phase: 01-audit-config-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - skills/kata-executing-phases/references/github-integration.md
  - skills/kata-executing-phases/references/planning-config.md
autonomous: true

must_haves:
  truths:
    - "Integration points documented for all GitHub-affected skills"
    - "Config schema includes github.enabled and github.issueMode"
    - "Reading patterns documented for github.* keys"
  artifacts:
    - path: "skills/kata-executing-phases/references/github-integration.md"
      provides: "GitHub integration points documentation"
      min_lines: 80
    - path: "skills/kata-executing-phases/references/planning-config.md"
      provides: "Config schema with github namespace"
      contains: "github.enabled"
  key_links:
    - from: "github-integration.md"
      to: "planning-config.md"
      via: "references github.* keys for conditional logic"
      pattern: "github\\.enabled"
---

<objective>
Document GitHub integration points and extend the config schema.

Purpose: Establish the foundation for GitHub integration by documenting where integration hooks into existing workflows and defining the config keys that control behavior.

Output:
- `github-integration.md` — Reference documenting all integration points for future phases
- Updated `planning-config.md` — Extended with `github.enabled` and `github.issueMode` schema
</objective>

<execution_context>
@~/.claude/kata/references/execute-plan.md
@~/.claude/kata/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-audit-config-foundation/01-RESEARCH.md

Reference files:
@skills/kata-executing-phases/references/planning-config.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create github-integration.md reference</name>
  <files>skills/kata-executing-phases/references/github-integration.md</files>
  <action>
Create a new reference file documenting all GitHub integration points.

Structure with `<github_integration>` outer container. Include sections:

1. **Overview** — Purpose of GitHub integration, relationship to `pr_workflow`
2. **Config Keys** — Document `github.enabled` and `github.issueMode` with defaults
3. **Integration Points by Phase** — For each future phase (2-5), document:
   - Which skill is modified
   - When the hook fires
   - What GitHub action occurs
   - Which config keys are checked

Skills to document (from research):
- `kata-starting-projects` (Phase 2): GitHub config onboarding
- `kata-starting-milestones` (Phase 2): Create GitHub Milestone
- `kata-configuring-settings` (Phase 2): Add GitHub settings
- `kata-planning-phases` (Phase 3-4): Create/update phase issue
- `kata-executing-phases` (Phase 4-5): Update issue checklist, create PR
- `kata-tracking-progress` (Phase 5): Show GH issue/PR status

4. **issueMode Behavior** — Clarify `auto | ask | never`:
   - `auto`: Create issues/milestones without prompting
   - `ask`: Prompt during milestone creation, apply to all phases in that milestone
   - `never`: Never create GitHub issues (milestones still created if enabled)

5. **Relationship to pr_workflow** — Document that these are independent:
   - `github.enabled` controls issues/milestones
   - `pr_workflow` controls branching
   - Recommend both be true together for full integration
  </action>
  <verify>File exists with all 5 sections, references all 6 skills, includes issueMode clarification</verify>
  <done>github-integration.md created with comprehensive integration points documentation</done>
</task>

<task type="auto">
  <name>Task 2: Extend planning-config.md with github schema</name>
  <files>skills/kata-executing-phases/references/planning-config.md</files>
  <action>
Read the existing planning-config.md and extend it with the github namespace.

Add to `<config_schema>` section:
1. Update the JSON schema to include:
   ```json
   "github": {
     "enabled": true|false,
     "issueMode": "auto|ask|never"
   }
   ```

2. Add to the options table:
   | `github.enabled`   | `false`  | Create GitHub Milestones/Issues when true |
   | `github.issueMode` | `never`  | Issue creation mode: `auto`, `ask`, `never` |

Add new `<github_integration>` section after `<pr_workflow_behavior>`:
1. Document config reading patterns:
   ```bash
   GITHUB_ENABLED=$(cat .planning/config.json 2>/dev/null | grep -o '"enabled"[[:space:]]*:[[:space:]]*[^,}]*' | grep -o 'true\|false' || echo "false")
   GITHUB_ISSUE_MODE=$(cat .planning/config.json 2>/dev/null | grep -o '"issueMode"[[:space:]]*:[[:space:]]*"[^"]*"' | grep -o '"[^"]*"$' | tr -d '"' || echo "never")
   ```

2. Document conditional execution pattern
3. Reference `github-integration.md` for detailed integration points

Do NOT modify other sections — only add the github namespace.
  </action>
  <verify>grep for "github.enabled" and "github.issueMode" in planning-config.md returns matches</verify>
  <done>planning-config.md extended with github.* schema and reading patterns</done>
</task>

</tasks>

<verification>
- [ ] `github-integration.md` exists in `skills/kata-executing-phases/references/`
- [ ] `github-integration.md` documents all 6 skills
- [ ] `github-integration.md` clarifies `issueMode` behavior
- [ ] `planning-config.md` includes `github.enabled` in schema
- [ ] `planning-config.md` includes `github.issueMode` in schema
- [ ] `planning-config.md` includes bash reading patterns for github.*
</verification>

<success_criteria>
1. Integration points documented for milestone-new, phase-execute, execute-plan commands
2. Config schema extended with `github.enabled` boolean toggle
3. Config schema extended with `github.issueMode` values `auto | ask | never`
</success_criteria>

<output>
After completion, create `.planning/phases/01-audit-config-foundation/01-01-SUMMARY.md`
</output>
